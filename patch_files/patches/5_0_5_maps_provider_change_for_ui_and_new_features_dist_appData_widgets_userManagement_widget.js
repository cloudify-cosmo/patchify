diff --git a/dist/appData/widgets/userManagement/widget.js b/dist/appData/widgets/userManagement/widget.js
index a51d3a0..2b39f95 100644
--- a/dist/appData/widgets/userManagement/widget.js
+++ b/dist/appData/widgets/userManagement/widget.js
@@ -1 +1 @@
-!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/console",n(n.s=40)}({0:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},2:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},3:function(e,t,n){var o=n(7),r=n(6);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?r(e):t}},4:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},40:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(1),s=n.n(a),i=n(2),l=n.n(i),c=n(3),u=n.n(c),p=n(4),d=n.n(p),m=n(5),h=n.n(m),g=function(){function e(t){s()(this,e),this.toolbox=t}return l()(e,[{key:"doCreate",value:function(e,t,n){return this.toolbox.getManager().doPut("/users",null,{username:e,password:t,role:n})}},{key:"doSetPassword",value:function(e,t){return this.toolbox.getManager().doPost("/users/".concat(e),null,{password:t})}},{key:"doSetRole",value:function(e,t){return this.toolbox.getManager().doPost("/users/".concat(e),null,{role:t})}},{key:"doGetTenants",value:function(){return this.toolbox.getManager().doGet("/tenants?_get_all_results=true&_include=name")}},{key:"doRemoveFromTenant",value:function(e,t){return this.toolbox.getManager().doDelete("/tenants/users",null,{username:e,tenant_name:t})}},{key:"doHandleTenants",value:function(e,t,n,o){var r=this,a=_.map(t,(function(t,n){return r.toolbox.getManager().doPut("/tenants/users",null,{username:e,tenant_name:n,role:t})})),s=_.map(n,(function(t){return r.toolbox.getManager().doDelete("/tenants/users",null,{username:e,tenant_name:t})})),i=_.map(o,(function(t,n){return r.toolbox.getManager().doPatch("/tenants/users",null,{username:e,tenant_name:n,role:t})}));return Promise.all(_.concat(a,s,i))}},{key:"doGetGroups",value:function(){return this.toolbox.getManager().doGet("/user-groups?_include=name")}},{key:"doRemoveFromGroup",value:function(e,t){return this.toolbox.getManager().doDelete("/user-groups/users",null,{username:e,group_name:t})}},{key:"doHandleGroups",value:function(e,t,n){var o=this,r=_.map(t,(function(t){return o.toolbox.getManager().doPut("/user-groups/users",null,{username:e,group_name:t})})),a=_.map(n,(function(t){return o.toolbox.getManager().doDelete("/user-groups/users",null,{username:e,group_name:t})}));return Promise.all(_.concat(r,a))}},{key:"doDelete",value:function(e){return this.toolbox.getManager().doDelete("/users/".concat(e))}},{key:"doActivate",value:function(e){return this.toolbox.getManager().doPost("/users/active/".concat(e),null,{action:"activate"})}},{key:"doDeactivate",value:function(e){return this.toolbox.getManager().doPost("/users/active/".concat(e),null,{action:"deactivate"})}}]),e}(),f=function(e){function t(){return s()(this,t),u()(this,d()(t).apply(this,arguments))}return h()(t,e),l()(t,[{key:"_actionClick",value:function(e,t){var n=t.name;this.props.onSelectAction(n,this.props.item)}},{key:"render",value:function(){var e=Stage.Basic,n=e.PopupMenu,o=e.Menu;return React.createElement(n,null,React.createElement(o,{pointing:!0,vertical:!0},React.createElement(o.Item,{icon:"lock",content:"Set password",name:t.SET_PASSWORD_ACTION,onClick:this._actionClick.bind(this)}),React.createElement(o.Item,{icon:"users",content:"Edit user's groups",name:t.EDIT_GROUPS_ACTION,onClick:this._actionClick.bind(this)}),React.createElement(o.Item,{icon:"user",content:"Edit user's tenants",name:t.EDIT_TENANTS_ACTION,onClick:this._actionClick.bind(this)}),React.createElement(o.Item,{icon:"trash",content:"Delete",name:t.DELETE_ACTION,onClick:this._actionClick.bind(this)})))}}]),t}(React.Component);r()(f,"SET_PASSWORD_ACTION","password"),r()(f,"EDIT_TENANTS_ACTION","tenants"),r()(f,"EDIT_GROUPS_ACTION","groups"),r()(f,"DELETE_ACTION","delete"),r()(f,"DEACTIVATE_ACTION","deactivate"),r()(f,"ACTIVATE_ACTION","activate"),r()(f,"SET_DEFAULT_USER_ROLE_ACTION","set-default-role"),r()(f,"SET_ADMIN_USER_ROLE_ACTION","set-admin-role");var b=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,d()(t).call(this,e,n))).state={processing:!1,processItem:""},o}return h()(t,e),l()(t,[{key:"_removeTenant",value:function(e){var t=this;this.setState({processItem:e,processing:!0}),new g(this.props.toolbox).doRemoveFromTenant(this.props.data.username,e).then((function(){t.props.toolbox.refresh(),t.props.toolbox.getEventBus().trigger("tenants:refresh"),t.setState({processItem:"",processing:!1})})).catch((function(e){t.props.onError(e.message),t.setState({processItem:"",processing:!1})}))}},{key:"_removeGroup",value:function(e){var t=this;this.setState({processItem:e,processing:!0}),new g(this.props.toolbox).doRemoveFromGroup(this.props.data.username,e).then((function(){t.props.toolbox.refresh(),t.props.toolbox.getEventBus().trigger("userGroups:refresh"),t.setState({processItem:"",processing:!1})})).catch((function(e){t.props.onError(e.message),t.setState({processItem:"",processing:!1})}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Segment,o=t.List,r=t.Icon,a=t.Message,s=t.Divider,i=t.Popup,l=Stage.Common.RolesPresenter;return React.createElement(n.Group,{horizontal:!0},React.createElement(n,null,React.createElement(r,{name:"users"})," Groups",React.createElement(s,null),React.createElement(o,{divided:!0,relaxed:!0,verticalAlign:"middle",className:"light"},this.props.data.groups.map((function(t){var n=e.state.processing&&e.state.processItem===t;return React.createElement(o.Item,{key:t},t,React.createElement(r,{link:!0,name:n?"notched circle":"remove",loading:n,className:"right floated",onClick:e._removeGroup.bind(e,t)}))})),_.isEmpty(this.props.data.groups)&&React.createElement(a,{content:"No groups available"}))),React.createElement(i,null,React.createElement(i.Trigger,null,React.createElement(n,null,React.createElement(r,{name:"user"})," Tenants",React.createElement(s,null),React.createElement(o,{divided:!0,relaxed:!0,verticalAlign:"middle",className:"light"},_.map(_.keys(this.props.data.tenants),(function(t){var n=e.state.processing&&e.state.processItem===t;return React.createElement(o.Item,{key:t},t," -"," ",React.createElement(l,{directRole:e.props.data.tenant_roles.direct[t],groupRoles:e.props.data.tenant_roles.groups[t]}),React.createElement(r,{link:!0,name:n?"notched circle":"remove",loading:n,className:"right floated",onClick:e._removeTenant.bind(e,t)}))})),_.isEmpty(this.props.data.tenants)&&React.createElement(a,{content:"No tenants available"})))),React.createElement(i.Content,null,"The tenants that this user is assigned to, and the assigned roles. When the roles are inherited from a user group, the name of the user group is also shown, for example: viewer (Viewers)")))}}]),t}(React.Component);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r()(b,"propTypes",{toolbox:PropTypes.object.isRequired,data:PropTypes.object.isRequired,onError:PropTypes.func});var y=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,d()(t).call(this,e,n))).availableTenantsPromise=null,o.state=E({},t.initialState,{open:!1}),o}return h()(t,e),l()(t,[{key:"onApprove",value:function(){return this._submitCreate(),!1}},{key:"onCancel",value:function(){return this.setState({open:!1}),!0}},{key:"componentDidUpdate",value:function(e,n){var o=this;if(!n.open&&this.state.open){this.setState(E({},t.initialState,{loading:!0}));var r=new g(this.props.toolbox);this.availableTenantsPromise=Stage.Utils.makeCancelable(r.doGetTenants()),this.availableTenantsPromise.promise.then((function(e){o.setState({error:null,availableTenants:e,loading:!1})})).catch((function(e){e.isCanceled||o.setState({error:e.message,availableTenants:{items:[]},loading:!1})}))}}},{key:"componentWillUnmount",value:function(){this.availableTenantsPromise&&this.availableTenantsPromise.cancel()}},{key:"_submitCreate",value:function(){var e=this,t={};if(_.isEmpty(this.state.username)&&(t.username="Please provide username"),_.isEmpty(this.state.password)&&(t.password="Please provide user password"),_.isEmpty(this.state.confirmPassword)&&(t.confirmPassword="Please provide password confirmation"),_.isEmpty(this.state.password)||_.isEmpty(this.state.confirmPassword)||this.state.password===this.state.confirmPassword||(t.confirmPassword="Passwords do not match"),!_.isEmpty(t))return this.setState({errors:t}),!1;this.setState({loading:!0});var n=new g(this.props.toolbox);n.doCreate(this.state.username,this.state.password,Stage.Common.RolesUtil.getSystemRole(this.state.isAdmin)).then((function(){return n.doHandleTenants(e.state.username,e.state.tenants,[],[])})).then((function(){e.setState({errors:{},loading:!1,open:!1}),e.props.toolbox.refresh(),e.props.toolbox.getEventBus().trigger("tenants:refresh")})).catch((function(t){e.setState({errors:{error:t.message},loading:!1})}))}},{key:"_handleInputChange",value:function(e,t){this.setState(Stage.Basic.Form.fieldNameValue(t))}},{key:"_handleTenantChange",value:function(e,t){var n=this,o={};_.forEach(t.value,(function(e){o[e]=n.state.tenants[e]||Stage.Common.RolesUtil.getDefaultRoleName(n.props.toolbox.getManager()._data.roles)})),this.setState({tenants:o})}},{key:"_handleRoleChange",value:function(e,t){var n=E({},this.state.tenants);n[e]=t,this.setState({tenants:n})}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,o=t.Button,r=t.CancelButton,a=t.Icon,s=t.Form,i=t.Message,l=t.Modal,c=Stage.Common.RolesPicker,u=React.createElement(o,{content:"Add",icon:"add user",labelPosition:"left",className:"addUserButton"}),p=E({items:[]},this.state.availableTenants),d=_.map(p.items,(function(e){return{text:e.name,value:e.name,key:e.name}}));return React.createElement(l,{trigger:u,open:this.state.open,onOpen:function(){return e.setState({open:!0})},onClose:function(){return e.setState({open:!1})},className:"addUserModal"},React.createElement(l.Header,null,React.createElement(a,{name:"add user"})," Add user"),React.createElement(l.Content,null,React.createElement(s,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(s.Field,{label:"Username",error:this.state.errors.username,required:!0},React.createElement(s.Input,{name:"username",value:this.state.username,onChange:this._handleInputChange.bind(this)})),React.createElement(s.Field,{label:"Password",error:this.state.errors.password,required:!0},React.createElement(s.Input,{name:"password",type:"password",value:this.state.password,onChange:this._handleInputChange.bind(this)})),React.createElement(s.Field,{label:"Confirm password",error:this.state.errors.confirmPassword,required:!0},React.createElement(s.Input,{name:"confirmPassword",type:"password",value:this.state.confirmPassword,onChange:this._handleInputChange.bind(this)})),React.createElement(s.Field,{error:this.state.errors.isAdmin},React.createElement(s.Checkbox,{label:"Admin",name:"isAdmin",checked:this.state.isAdmin,onChange:this._handleInputChange.bind(this)})),this.state.isAdmin&&React.createElement(i,null,"Admin users have full permissions to all tenants on the manager."),React.createElement(s.Field,{label:"Tenants"},React.createElement(s.Dropdown,{name:"tenants",multiple:!0,selection:!0,options:d,value:Object.keys(this.state.tenants),onChange:this._handleTenantChange.bind(this)})),React.createElement(c,{onUpdate:this._handleRoleChange.bind(this),resources:this.state.tenants,resourceName:"tenant",toolbox:this.props.toolbox}))),React.createElement(l.Actions,null,React.createElement(r,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(n,{onClick:this.onApprove.bind(this),disabled:this.state.loading,content:"Add",icon:"add user",color:"green"})))}}]),t}(React.Component);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}r()(y,"initialState",{loading:!1,username:"",password:"",confirmPassword:"",isAdmin:!1,tenants:{},errors:{}});var C=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,d()(t).call(this,e,n))).state=t.initialState,o}return h()(t,e),l()(t,[{key:"onApprove",value:function(){return this._submitPassword(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.setState(t.initialState)}},{key:"_submitPassword",value:function(){var e=this,t={};if(_.isEmpty(this.state.password)&&(t.password="Please provide user password"),_.isEmpty(this.state.confirmPassword)&&(t.confirmPassword="Please provide password confirmation"),_.isEmpty(this.state.password)||_.isEmpty(this.state.confirmPassword)||this.state.password===this.state.confirmPassword||(t.confirmPassword="Passwords do not match"),!_.isEmpty(t))return this.setState({errors:t}),!1;this.setState({loading:!0}),new g(this.props.toolbox).doSetPassword(this.props.user.username,this.state.password).then((function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.onHide()})).catch((function(t){e.setState({errors:{error:t.message},loading:!1})}))}},{key:"_handleInputChange",value:function(e,t){this.setState(Stage.Basic.Form.fieldNameValue(t))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Modal,o=t.Icon,a=t.Form,s=t.ApproveButton,i=t.CancelButton,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({username:""},this.props.user);return React.createElement(n,{open:this.props.open,onClose:function(){return e.props.onHide()},className:"userPasswordModal"},React.createElement(n.Header,null,React.createElement(o,{name:"lock"})," Set password for ",l.username),React.createElement(n.Content,null,React.createElement(a,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(a.Field,{error:this.state.errors.password},React.createElement(a.Input,{name:"password",placeholder:"Password",type:"password",value:this.state.password,onChange:this._handleInputChange.bind(this)})),React.createElement(a.Field,{error:this.state.errors.confirmPassword},React.createElement(a.Input,{name:"confirmPassword",placeholder:"Confirm password",type:"password",value:this.state.confirmPassword,onChange:this._handleInputChange.bind(this)})))),React.createElement(n.Actions,null,React.createElement(i,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(s,{onClick:this.onApprove.bind(this),disabled:this.state.loading,icon:"lock",color:"green"})))}}]),t}(React.Component);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r()(C,"initialState",{loading:!1,password:"",confirmPassword:"",errors:{}});var w=Stage.Common.RolesPicker,T=Stage.Common.RolesUtil,x=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,d()(t).call(this,e,n))).state=t.initialState,o}return h()(t,e),l()(t,[{key:"onApprove",value:function(){return this._submitTenant(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"onRoleChange",value:function(e,t){var n=O({},this.state.tenants);n[e]=t,this.setState({tenants:n})}},{key:"componentDidUpdate",value:function(e){if(!e.open&&this.props.open){var n=_.mapValues(_.pickBy(this.props.user.tenants,(function(e){return!_.isEmpty(e["tenant-role"])})),(function(e){return e["tenant-role"]}));this.setState(O({},t.initialState,{tenants:n}))}}},{key:"_submitTenant",value:function(){var e=this;this.setState({loading:!0});var t=this.props.user.tenant_roles.direct,n=Object.keys(t),o=this.state.tenants,r=Object.keys(o),a=_.pick(o,_.difference(r,n)),s=_.difference(n,r),i=_.pickBy(o,(function(e,n){return t[n]&&!_.isEqual(t[n],e)}));new g(this.props.toolbox).doHandleTenants(this.props.user.username,a,s,i).then((function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.toolbox.getEventBus().trigger("tenants:refresh"),e.props.onHide()})).catch((function(t){e.setState({errors:{error:t.message},loading:!1})}))}},{key:"_handleInputChange",value:function(e,t){var n=this,o={};_.forEach(t.value,(function(e){o[e]=n.state.tenants[e]||T.getDefaultRoleName(n.props.toolbox.getManager()._data.roles)})),this.setState({tenants:o})}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Modal,o=t.Icon,r=t.Form,a=t.ApproveButton,s=t.CancelButton,i=O({username:""},this.props.user),l=O({items:[]},this.props.tenants),c=_.map(l.items,(function(e){return{text:e.name,value:e.name,key:e.name}}));return React.createElement(n,{open:this.props.open,onClose:function(){return e.props.onHide()},className:"editTenantsModal"},React.createElement(n.Header,null,React.createElement(o,{name:"user"})," Edit tenants for ",i.username),React.createElement(n.Content,null,React.createElement(r,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(r.Field,null,React.createElement(r.Dropdown,{placeholder:"Tenants",multiple:!0,selection:!0,options:c,name:"tenants",value:Object.keys(this.state.tenants),onChange:this._handleInputChange.bind(this)})),React.createElement(w,{onUpdate:this.onRoleChange.bind(this),resources:this.state.tenants,resourceName:"tenant",toolbox:this.props.toolbox}))),React.createElement(n.Actions,null,React.createElement(s,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(a,{onClick:this.onApprove.bind(this),disabled:this.state.loading,icon:"user",color:"green"})))}}]),t}(React.Component);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r()(x,"initialState",{loading:!1,tenants:{},errors:{}});var A=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,d()(t).call(this,e,n))).state=t.initialState,o}return h()(t,e),l()(t,[{key:"onApprove",value:function(){return this._submitGroup(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.setState(k({},t.initialState,{groups:this.props.user.groups}))}},{key:"_submitGroup",value:function(){var e=this;this.setState({loading:!0});var t=_.difference(this.state.groups,this.props.user.groups),n=_.difference(this.props.user.groups,this.state.groups);new g(this.props.toolbox).doHandleGroups(this.props.user.username,t,n).then((function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.toolbox.getEventBus().trigger("userGroups:refresh"),e.props.toolbox.getEventBus().trigger("tenants:refresh"),e.props.onHide()})).catch((function(t){e.setState({errors:{error:t.message},loading:!1})}))}},{key:"_handleInputChange",value:function(e,t){this.setState(Stage.Basic.Form.fieldNameValue(t))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Modal,o=t.Icon,r=t.Form,a=t.ApproveButton,s=t.CancelButton,i=k({username:""},this.props.user),l=k({items:[]},this.props.groups),c=_.map(l.items,(function(e){return{text:e.name,value:e.name,key:e.name}}));return React.createElement(n,{open:this.props.open,onClose:function(){return e.props.onHide()}},React.createElement(n.Header,null,React.createElement(o,{name:"user"})," Edit user groups for ",i.username),React.createElement(n.Content,null,React.createElement(r,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(r.Field,null,React.createElement(r.Dropdown,{placeholder:"Groups",multiple:!0,selection:!0,options:c,name:"groups",value:this.state.groups,onChange:this._handleInputChange.bind(this)})))),React.createElement(n.Actions,null,React.createElement(s,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(a,{onClick:this.onApprove.bind(this),disabled:this.state.loading,icon:"user",color:"green"})))}}]),t}(React.Component);r()(A,"initialState",{loading:!1,groups:[],errors:{}});var I=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,d()(t).call(this,e,n))).state={error:null,showModal:!1,modalType:"",user:t.EMPTY_USER,tenants:{},groups:{},activateLoading:!1,settingUserRoleLoading:!1},o}return h()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(this.props.widget,e.widget)||!_.isEqual(this.state,t)||!_.isEqual(this.props.data,e.data)}},{key:"_refreshData",value:function(){this.props.toolbox.refresh()}},{key:"componentDidMount",value:function(){this.props.toolbox.getEventBus().on("users:refresh",this._refreshData,this)}},{key:"componentWillUnmount",value:function(){this.props.toolbox.getEventBus().off("users:refresh",this._refreshData)}},{key:"fetchData",value:function(e){return this.props.toolbox.refresh(e)}},{key:"_selectUser",value:function(e){var t=this.props.toolbox.getContext().getValue("userName");this.props.toolbox.getContext().setValue("userName",e===t?null:e)}},{key:"_getAvailableTenants",value:function(e,n){var o=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.props.toolbox.loading(!0);var a=new g(this.props.toolbox);a.doGetTenants().then((function(a){o.setState({error:null,tenants:a,user:r?n:t.EMPTY_USER,modalType:r?e:"",showModal:r}),o.props.toolbox.loading(!1)})).catch((function(e){o.setState({error:e.message}),o.props.toolbox.loading(!1)}))}},{key:"_getAvailableGroups",value:function(e,t){var n=this;this.props.toolbox.loading(!0),new g(this.props.toolbox).doGetGroups().then((function(o){n.setState({error:null,user:t,groups:o,modalType:e,showModal:!0}),n.props.toolbox.loading(!1)})).catch((function(e){n.setState({error:e.message}),n.props.toolbox.loading(!1)}))}},{key:"_showModal",value:function(e,t){e===f.EDIT_TENANTS_ACTION?this._getAvailableTenants(e,t):e===f.EDIT_GROUPS_ACTION?this._getAvailableGroups(e,t):e===f.ACTIVATE_ACTION?this._activateUser(t):e!==f.DEACTIVATE_ACTION||this._isCurrentUser(t)?e===f.SET_ADMIN_USER_ROLE_ACTION?this._setRole(t,!0):e!==f.SET_DEFAULT_USER_ROLE_ACTION||this._isCurrentUser(t)?this.setState({user:t,modalType:e,showModal:!0}):this._setRole(t,!1):this._deactivateUser(t)}},{key:"_hideModal",value:function(){this.setState({showModal:!1})}},{key:"_handleError",value:function(e){this.setState({error:e})}},{key:"_isCurrentUser",value:function(e){return this.props.toolbox.getManager().getCurrentUsername()===e.username}},{key:"_isUserInAdminGroup",value:function(e){return _.has(e.group_system_roles,Stage.Common.Consts.sysAdminRole)}},{key:"_deleteUser",value:function(){var e=this;this.props.toolbox.loading(!0),new g(this.props.toolbox).doDelete(this.state.user.username).then((function(){e._hideModal(),e.setState({error:null}),e.props.toolbox.loading(!1),e.props.toolbox.refresh()})).catch((function(t){e._hideModal(),e.setState({error:t.message}),e.props.toolbox.loading(!1)}))}},{key:"_setRole",value:function(e,t){var n=this;this.props.toolbox.loading(!0),this.setState({settingUserRoleLoading:e.username}),new g(this.props.toolbox).doSetRole(e.username,Stage.Common.RolesUtil.getSystemRole(t)).then((function(){n.setState({error:null,settingUserRoleLoading:!1}),n.props.toolbox.loading(!1),n._isCurrentUser(e)&&!t?n.props.toolbox.getEventBus().trigger("menu.users:logout"):n.props.toolbox.refresh()})).catch((function(e){n.setState({error:e.message,settingUserRoleLoading:!1}),n.props.toolbox.loading(!1)}))}},{key:"_activateUser",value:function(e){var t=this;this.props.toolbox.loading(!0),this.setState({activateLoading:e.username}),new g(this.props.toolbox).doActivate(e.username).then((function(){t.setState({error:null,activateLoading:!1}),t.props.toolbox.loading(!1),t.props.toolbox.refresh()})).catch((function(e){t.setState({error:e.message,activateLoading:!1}),t.props.toolbox.loading(!1)}))}},{key:"_deactivateUser",value:function(e){var t=this;this.props.toolbox.loading(!0),this.setState({activateLoading:e.username}),new g(this.props.toolbox).doDeactivate(e.username).then((function(){t.setState({error:null,activateLoading:!1}),t.props.toolbox.loading(!1),t._isCurrentUser(e)?t.props.toolbox.getEventBus().trigger("menu.users:logout"):(t.props.toolbox.refresh(),t.props.toolbox.getEventBus().trigger("userGroups:refresh"))})).catch((function(e){t.setState({error:e.message,activateLoading:!1}),t.props.toolbox.loading(!1)}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Checkbox,o=t.Confirm,r=t.DataTable,a=t.ErrorMessage,s=t.Label,i=t.Loader,l=t.Popup;return React.createElement("div",null,React.createElement(a,{error:this.state.error,onDismiss:function(){return e.setState({error:null})},autoHide:!0}),React.createElement(r,{fetchData:this.fetchData.bind(this),totalSize:this.props.data.total,pageSize:this.props.widget.configuration.pageSize,sortColumn:this.props.widget.configuration.sortColumn,sortAscending:this.props.widget.configuration.sortAscending,searchable:!0,className:"usersTable",noDataMessage:'There are no Users available in manager. Click "Add" to add Users.'},React.createElement(r.Column,{label:"Username",name:"username",width:"37%"}),React.createElement(r.Column,{label:"Last login",name:"last_login_at",width:"18%"}),React.createElement(r.Column,{label:"Admin",width:"10%"}),React.createElement(r.Column,{label:"Active",name:"active",width:"10%"}),React.createElement(r.Column,{label:"# Groups",width:"10%"}),React.createElement(r.Column,{label:"# Tenants",width:"10%"}),React.createElement(r.Column,{label:"",width:"5%"}),this.props.data.items.map((function(t){var o=function(t,o){return React.createElement(n,{checked:t.isAdmin,disabled:o||t.username===Stage.Common.Consts.adminUsername,onChange:function(){return t.isAdmin?e._showModal(f.SET_DEFAULT_USER_ROLE_ACTION,t):e._showModal(f.SET_ADMIN_USER_ROLE_ACTION,t)},onClick:function(e){e.stopPropagation()}})};return React.createElement(r.RowExpandable,{key:t.username,expanded:t.isSelected},React.createElement(r.Row,{id:"".concat("usersTable","_").concat(t.username),key:t.username,selected:t.isSelected,onClick:e._selectUser.bind(e,t.username)},React.createElement(r.Data,null,t.username),React.createElement(r.Data,null,t.last_login_at),React.createElement(r.Data,{className:"center aligned"},e.state.settingUserRoleLoading===t.username?React.createElement(i,{active:!0,inline:!0,size:"mini"}):e._isUserInAdminGroup(t)&&t.username!==Stage.Common.Consts.adminUsername?React.createElement(l,null,React.createElement(l.Trigger,null,o(t,!0)),React.createElement(l.Content,null,"To remove the administrator privileges for this user, remove the user from the group that is assigned administrator privileges.")):o(t,!1)),React.createElement(r.Data,{className:"center aligned"},e.state.activateLoading===t.username?React.createElement(i,{active:!0,inline:!0,size:"mini"}):React.createElement(n,{checked:t.active,onChange:function(){return t.active?e._showModal(f.DEACTIVATE_ACTION,t):e._showModal(f.ACTIVATE_ACTION,t)},onClick:function(e){e.stopPropagation()}})),React.createElement(r.Data,null,React.createElement(s,{className:"green",horizontal:!0},t.groupCount)),React.createElement(r.Data,null,React.createElement(s,{className:"blue",horizontal:!0},t.tenantCount)),React.createElement(r.Data,{className:"center aligned"},React.createElement(f,{item:t,onSelectAction:e._showModal.bind(e)}))),React.createElement(r.DataExpandable,{key:t.username},React.createElement(b,{data:t,toolbox:e.props.toolbox,onError:e._handleError.bind(e)})))})),React.createElement(r.Action,null,React.createElement(y,{roles:this.props.roles,toolbox:this.props.toolbox}))),React.createElement(C,{open:this.state.modalType===f.SET_PASSWORD_ACTION&&this.state.showModal,user:this.state.user,onHide:this._hideModal.bind(this),toolbox:this.props.toolbox}),React.createElement(x,{open:this.state.modalType===f.EDIT_TENANTS_ACTION&&this.state.showModal,user:this.state.user,tenants:this.state.tenants,onHide:this._hideModal.bind(this),toolbox:this.props.toolbox}),React.createElement(A,{open:this.state.modalType===f.EDIT_GROUPS_ACTION&&this.state.showModal,user:this.state.user,groups:this.state.groups,onHide:this._hideModal.bind(this),toolbox:this.props.toolbox}),React.createElement(o,{content:"Are you sure you want to remove user ".concat(this.state.user.username,"?"),open:this.state.modalType===f.DELETE_ACTION&&this.state.showModal,onConfirm:this._deleteUser.bind(this),onCancel:this._hideModal.bind(this)}),React.createElement(o,{content:"Are you sure you want to remove your administrator privileges? You will be logged out of the system so the changes take effect.",open:this.state.modalType===f.SET_DEFAULT_USER_ROLE_ACTION&&this.state.showModal,onConfirm:this._setRole.bind(this,this.state.user,!1),onCancel:this._hideModal.bind(this)}),React.createElement(o,{content:"Are you sure you want to deactivate current user and log out?",open:this.state.modalType===f.DEACTIVATE_ACTION&&this.state.showModal,onConfirm:this._deactivateUser.bind(this,this.state.user),onCancel:this._hideModal.bind(this)}))}}]),t}(React.Component);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r()(I,"EMPTY_USER",{username:""}),Stage.defineWidget({id:"userManagement",name:"User management",description:"This widget shows a list of available users and allow managing them",initialWidth:5,initialHeight:16,color:"brown",fetchUrl:{users:"[manager]/users?_get_data=true[params]"},isReact:!0,hasReadme:!0,permission:Stage.GenericConfig.WIDGET_PERMISSION("userManagement"),categories:[Stage.GenericConfig.CATEGORY.SYSTEM_RESOURCES],initialConfiguration:[Stage.GenericConfig.POLLING_TIME_CONFIG(30),Stage.GenericConfig.PAGE_SIZE_CONFIG(),Stage.GenericConfig.SORT_COLUMN_CONFIG("username"),Stage.GenericConfig.SORT_ASCENDING_CONFIG(!0)],render:function(e,t,n,o){if(_.isEmpty(t))return React.createElement(Stage.Basic.Loading,null);var r=o.getContext().getValue("userName"),a=t.users;a=j({},t.users,{items:_.map(a.items,(function(e){return j({},e,{last_login_at:e.last_login_at?Stage.Utils.Time.formatTimestamp(e.last_login_at):"",groupCount:e.groups.length,tenantCount:_.size(e.tenants),isSelected:e.username===r,isAdmin:e.role===Stage.Common.Consts.sysAdminRole||_.has(e.group_system_roles,Stage.Common.Consts.sysAdminRole)})})),total:_.get(t.users,"metadata.pagination.total",0)});var s=_.map(o.getManager().getSystemRoles(),(function(e){return{text:e.description?"".concat(e.name," - ").concat(e.description):e.name,value:e.name}}));return React.createElement(I,{widget:e,data:a,roles:s,toolbox:o})}})},5:function(e,t,n){var o=n(8);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},6:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},7:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},8:function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,o)}e.exports=n}});
\ No newline at end of file
+!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/console",n(n.s=42)}({0:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},2:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},3:function(e,t,n){var o=n(7),a=n(6);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?a(e):t}},4:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},42:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(1),s=n.n(r),i=n(2),l=n.n(i),c=n(3),u=n.n(c),p=n(4),m=n.n(p),d=n(5),h=n.n(d),g=function(){function e(t){s()(this,e),this.toolbox=t}return l()(e,[{key:"doCreate",value:function(e,t,n){return this.toolbox.getManager().doPut("/users",null,{username:e,password:t,role:n})}},{key:"doSetPassword",value:function(e,t){return this.toolbox.getManager().doPost("/users/".concat(e),null,{password:t})}},{key:"doSetRole",value:function(e,t){return this.toolbox.getManager().doPost("/users/".concat(e),null,{role:t})}},{key:"doGetTenants",value:function(){return this.toolbox.getManager().doGet("/tenants?_get_all_results=true&_include=name")}},{key:"doRemoveFromTenant",value:function(e,t){return this.toolbox.getManager().doDelete("/tenants/users",null,{username:e,tenant_name:t})}},{key:"doHandleTenants",value:function(e,t,n,o){var a=this,r=_.map(t,(function(t,n){return a.toolbox.getManager().doPut("/tenants/users",null,{username:e,tenant_name:n,role:t})})),s=_.map(n,(function(t){return a.toolbox.getManager().doDelete("/tenants/users",null,{username:e,tenant_name:t})})),i=_.map(o,(function(t,n){return a.toolbox.getManager().doPatch("/tenants/users",null,{username:e,tenant_name:n,role:t})}));return Promise.all(_.concat(r,s,i))}},{key:"doGetGroups",value:function(){return this.toolbox.getManager().doGet("/user-groups?_include=name")}},{key:"doRemoveFromGroup",value:function(e,t){return this.toolbox.getManager().doDelete("/user-groups/users",null,{username:e,group_name:t})}},{key:"doHandleGroups",value:function(e,t,n){var o=this,a=_.map(t,(function(t){return o.toolbox.getManager().doPut("/user-groups/users",null,{username:e,group_name:t})})),r=_.map(n,(function(t){return o.toolbox.getManager().doDelete("/user-groups/users",null,{username:e,group_name:t})}));return Promise.all(_.concat(a,r))}},{key:"doDelete",value:function(e){return this.toolbox.getManager().doDelete("/users/".concat(e))}},{key:"doActivate",value:function(e){return this.toolbox.getManager().doPost("/users/active/".concat(e),null,{action:"activate"})}},{key:"doDeactivate",value:function(e){return this.toolbox.getManager().doPost("/users/active/".concat(e),null,{action:"deactivate"})}}]),e}(),f=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return h()(t,e),l()(t,[{key:"_actionClick",value:function(e,t){var n=t.name;this.props.onSelectAction(n,this.props.item)}},{key:"render",value:function(){var e=Stage.Basic,n=e.PopupMenu,o=e.Menu;return React.createElement(n,null,React.createElement(o,{pointing:!0,vertical:!0},React.createElement(o.Item,{icon:"lock",content:"Change password",name:t.CHANGE_PASSWORD_ACTION,onClick:this._actionClick.bind(this)}),React.createElement(o.Item,{icon:"users",content:"Edit user's groups",name:t.EDIT_GROUPS_ACTION,onClick:this._actionClick.bind(this)}),React.createElement(o.Item,{icon:"user",content:"Edit user's tenants",name:t.EDIT_TENANTS_ACTION,onClick:this._actionClick.bind(this)}),React.createElement(o.Item,{icon:"trash",content:"Delete",name:t.DELETE_ACTION,onClick:this._actionClick.bind(this)})))}}]),t}(React.Component);a()(f,"CHANGE_PASSWORD_ACTION","password"),a()(f,"EDIT_TENANTS_ACTION","tenants"),a()(f,"EDIT_GROUPS_ACTION","groups"),a()(f,"DELETE_ACTION","delete"),a()(f,"DEACTIVATE_ACTION","deactivate"),a()(f,"ACTIVATE_ACTION","activate"),a()(f,"SET_DEFAULT_USER_ROLE_ACTION","set-default-role"),a()(f,"SET_ADMIN_USER_ROLE_ACTION","set-admin-role");var b=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,m()(t).call(this,e,n))).state={processing:!1,processItem:""},o}return h()(t,e),l()(t,[{key:"_removeTenant",value:function(e){var t=this;this.setState({processItem:e,processing:!0}),new g(this.props.toolbox).doRemoveFromTenant(this.props.data.username,e).then((function(){t.props.toolbox.refresh(),t.props.toolbox.getEventBus().trigger("tenants:refresh"),t.setState({processItem:"",processing:!1})})).catch((function(e){t.props.onError(e.message),t.setState({processItem:"",processing:!1})}))}},{key:"_removeGroup",value:function(e){var t=this;this.setState({processItem:e,processing:!0}),new g(this.props.toolbox).doRemoveFromGroup(this.props.data.username,e).then((function(){t.props.toolbox.refresh(),t.props.toolbox.getEventBus().trigger("userGroups:refresh"),t.setState({processItem:"",processing:!1})})).catch((function(e){t.props.onError(e.message),t.setState({processItem:"",processing:!1})}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Segment,o=t.List,a=t.Icon,r=t.Message,s=t.Divider,i=t.Popup,l=Stage.Common.RolesPresenter;return React.createElement(n.Group,{horizontal:!0},React.createElement(n,null,React.createElement(a,{name:"users"})," Groups",React.createElement(s,null),React.createElement(o,{divided:!0,relaxed:!0,verticalAlign:"middle",className:"light"},this.props.data.groups.map((function(t){var n=e.state.processing&&e.state.processItem===t;return React.createElement(o.Item,{key:t},t,React.createElement(a,{link:!0,name:n?"notched circle":"remove",loading:n,className:"right floated",onClick:e._removeGroup.bind(e,t)}))})),_.isEmpty(this.props.data.groups)&&React.createElement(r,{content:"No groups available"}))),React.createElement(i,null,React.createElement(i.Trigger,null,React.createElement(n,null,React.createElement(a,{name:"user"})," Tenants",React.createElement(s,null),React.createElement(o,{divided:!0,relaxed:!0,verticalAlign:"middle",className:"light"},_.map(_.keys(this.props.data.tenants),(function(t){var n=e.state.processing&&e.state.processItem===t;return React.createElement(o.Item,{key:t},t," -"," ",React.createElement(l,{directRole:e.props.data.tenant_roles.direct[t],groupRoles:e.props.data.tenant_roles.groups[t]}),React.createElement(a,{link:!0,name:n?"notched circle":"remove",loading:n,className:"right floated",onClick:e._removeTenant.bind(e,t)}))})),_.isEmpty(this.props.data.tenants)&&React.createElement(r,{content:"No tenants available"})))),React.createElement(i.Content,null,"The tenants that this user is assigned to, and the assigned roles. When the roles are inherited from a user group, the name of the user group is also shown, for example: viewer (Viewers)")))}}]),t}(React.Component);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a()(b,"propTypes",{toolbox:PropTypes.object.isRequired,data:PropTypes.object.isRequired,onError:PropTypes.func});var y=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,m()(t).call(this,e,n))).availableTenantsPromise=null,o.state=E({},t.initialState,{open:!1}),o}return h()(t,e),l()(t,[{key:"onApprove",value:function(){return this._submitCreate(),!1}},{key:"onCancel",value:function(){return this.setState({open:!1}),!0}},{key:"componentDidUpdate",value:function(e,n){var o=this;if(!n.open&&this.state.open){this.setState(E({},t.initialState,{loading:!0}));var a=new g(this.props.toolbox);this.availableTenantsPromise=Stage.Utils.makeCancelable(a.doGetTenants()),this.availableTenantsPromise.promise.then((function(e){o.setState({error:null,availableTenants:e,loading:!1})})).catch((function(e){e.isCanceled||o.setState({error:e.message,availableTenants:{items:[]},loading:!1})}))}}},{key:"componentWillUnmount",value:function(){this.availableTenantsPromise&&this.availableTenantsPromise.cancel()}},{key:"_submitCreate",value:function(){var e=this,t={};if(_.isEmpty(this.state.username)&&(t.username="Please provide username"),_.isEmpty(this.state.password)&&(t.password="Please provide user password"),_.isEmpty(this.state.confirmPassword)&&(t.confirmPassword="Please provide password confirmation"),_.isEmpty(this.state.password)||_.isEmpty(this.state.confirmPassword)||this.state.password===this.state.confirmPassword||(t.confirmPassword="Passwords do not match"),!_.isEmpty(t))return this.setState({errors:t}),!1;this.setState({loading:!0});var n=new g(this.props.toolbox);n.doCreate(this.state.username,this.state.password,Stage.Common.RolesUtil.getSystemRole(this.state.isAdmin)).then((function(){return n.doHandleTenants(e.state.username,e.state.tenants,[],[])})).then((function(){e.setState({errors:{},loading:!1,open:!1}),e.props.toolbox.refresh(),e.props.toolbox.getEventBus().trigger("tenants:refresh")})).catch((function(t){e.setState({errors:{error:t.message},loading:!1})}))}},{key:"_handleInputChange",value:function(e,t){this.setState(Stage.Basic.Form.fieldNameValue(t))}},{key:"_handleTenantChange",value:function(e,t){var n=this,o={};_.forEach(t.value,(function(e){o[e]=n.state.tenants[e]||Stage.Common.RolesUtil.getDefaultRoleName(n.props.toolbox.getManager()._data.roles)})),this.setState({tenants:o})}},{key:"_handleRoleChange",value:function(e,t){var n=E({},this.state.tenants);n[e]=t,this.setState({tenants:n})}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,o=t.Button,a=t.CancelButton,r=t.Icon,s=t.Form,i=t.Message,l=t.Modal,c=Stage.Common.RolesPicker,u=React.createElement(o,{content:"Add",icon:"add user",labelPosition:"left",className:"addUserButton"}),p=E({items:[]},this.state.availableTenants),m=_.map(p.items,(function(e){return{text:e.name,value:e.name,key:e.name}}));return React.createElement(l,{trigger:u,open:this.state.open,onOpen:function(){return e.setState({open:!0})},onClose:function(){return e.setState({open:!1})},className:"addUserModal"},React.createElement(l.Header,null,React.createElement(r,{name:"add user"})," Add user"),React.createElement(l.Content,null,React.createElement(s,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(s.Field,{label:"Username",error:this.state.errors.username,required:!0},React.createElement(s.Input,{name:"username",value:this.state.username,onChange:this._handleInputChange.bind(this)})),React.createElement(s.Field,{label:"Password",error:this.state.errors.password,required:!0},React.createElement(s.Input,{name:"password",type:"password",value:this.state.password,onChange:this._handleInputChange.bind(this)})),React.createElement(s.Field,{label:"Confirm password",error:this.state.errors.confirmPassword,required:!0},React.createElement(s.Input,{name:"confirmPassword",type:"password",value:this.state.confirmPassword,onChange:this._handleInputChange.bind(this)})),React.createElement(s.Field,{error:this.state.errors.isAdmin},React.createElement(s.Checkbox,{label:"Admin",name:"isAdmin",checked:this.state.isAdmin,onChange:this._handleInputChange.bind(this)})),this.state.isAdmin&&React.createElement(i,null,"Admin users have full permissions to all tenants on the manager."),React.createElement(s.Field,{label:"Tenants"},React.createElement(s.Dropdown,{name:"tenants",multiple:!0,selection:!0,options:m,value:Object.keys(this.state.tenants),onChange:this._handleTenantChange.bind(this)})),React.createElement(c,{onUpdate:this._handleRoleChange.bind(this),resources:this.state.tenants,resourceName:"tenant",toolbox:this.props.toolbox}))),React.createElement(l.Actions,null,React.createElement(a,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(n,{onClick:this.onApprove.bind(this),disabled:this.state.loading,content:"Add",icon:"add user",color:"green"})))}}]),t}(React.Component);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a()(y,"initialState",{loading:!1,username:"",password:"",confirmPassword:"",isAdmin:!1,tenants:{},errors:{}});var S=Stage.Common.RolesPicker,O=Stage.Common.RolesUtil,T=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,m()(t).call(this,e,n))).state=t.initialState,o}return h()(t,e),l()(t,[{key:"onApprove",value:function(){return this._submitTenant(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"onRoleChange",value:function(e,t){var n=C({},this.state.tenants);n[e]=t,this.setState({tenants:n})}},{key:"componentDidUpdate",value:function(e){if(!e.open&&this.props.open){var n=_.mapValues(_.pickBy(this.props.user.tenants,(function(e){return!_.isEmpty(e["tenant-role"])})),(function(e){return e["tenant-role"]}));this.setState(C({},t.initialState,{tenants:n}))}}},{key:"_submitTenant",value:function(){var e=this;this.setState({loading:!0});var t=this.props.user.tenant_roles.direct,n=Object.keys(t),o=this.state.tenants,a=Object.keys(o),r=_.pick(o,_.difference(a,n)),s=_.difference(n,a),i=_.pickBy(o,(function(e,n){return t[n]&&!_.isEqual(t[n],e)}));new g(this.props.toolbox).doHandleTenants(this.props.user.username,r,s,i).then((function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.toolbox.getEventBus().trigger("tenants:refresh"),e.props.onHide()})).catch((function(t){e.setState({errors:{error:t.message},loading:!1})}))}},{key:"_handleInputChange",value:function(e,t){var n=this,o={};_.forEach(t.value,(function(e){o[e]=n.state.tenants[e]||O.getDefaultRoleName(n.props.toolbox.getManager()._data.roles)})),this.setState({tenants:o})}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Modal,o=t.Icon,a=t.Form,r=t.ApproveButton,s=t.CancelButton,i=C({username:""},this.props.user),l=C({items:[]},this.props.tenants),c=_.map(l.items,(function(e){return{text:e.name,value:e.name,key:e.name}}));return React.createElement(n,{open:this.props.open,onClose:function(){return e.props.onHide()},className:"editTenantsModal"},React.createElement(n.Header,null,React.createElement(o,{name:"user"})," Edit tenants for ",i.username),React.createElement(n.Content,null,React.createElement(a,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(a.Field,null,React.createElement(a.Dropdown,{placeholder:"Tenants",multiple:!0,selection:!0,options:c,name:"tenants",value:Object.keys(this.state.tenants),onChange:this._handleInputChange.bind(this)})),React.createElement(S,{onUpdate:this.onRoleChange.bind(this),resources:this.state.tenants,resourceName:"tenant",toolbox:this.props.toolbox}))),React.createElement(n.Actions,null,React.createElement(s,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(r,{onClick:this.onApprove.bind(this),disabled:this.state.loading,icon:"user",color:"green"})))}}]),t}(React.Component);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a()(T,"initialState",{loading:!1,tenants:{},errors:{}});var A=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,m()(t).call(this,e,n))).state=t.initialState,o}return h()(t,e),l()(t,[{key:"onApprove",value:function(){return this._submitGroup(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.setState(x({},t.initialState,{groups:this.props.user.groups}))}},{key:"_submitGroup",value:function(){var e=this;this.setState({loading:!0});var t=_.difference(this.state.groups,this.props.user.groups),n=_.difference(this.props.user.groups,this.state.groups);new g(this.props.toolbox).doHandleGroups(this.props.user.username,t,n).then((function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.toolbox.getEventBus().trigger("userGroups:refresh"),e.props.toolbox.getEventBus().trigger("tenants:refresh"),e.props.onHide()})).catch((function(t){e.setState({errors:{error:t.message},loading:!1})}))}},{key:"_handleInputChange",value:function(e,t){this.setState(Stage.Basic.Form.fieldNameValue(t))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Modal,o=t.Icon,a=t.Form,r=t.ApproveButton,s=t.CancelButton,i=x({username:""},this.props.user),l=x({items:[]},this.props.groups),c=_.map(l.items,(function(e){return{text:e.name,value:e.name,key:e.name}}));return React.createElement(n,{open:this.props.open,onClose:function(){return e.props.onHide()}},React.createElement(n.Header,null,React.createElement(o,{name:"user"})," Edit user groups for ",i.username),React.createElement(n.Content,null,React.createElement(a,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(a.Field,null,React.createElement(a.Dropdown,{placeholder:"Groups",multiple:!0,selection:!0,options:c,name:"groups",value:this.state.groups,onChange:this._handleInputChange.bind(this)})))),React.createElement(n.Actions,null,React.createElement(s,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(r,{onClick:this.onApprove.bind(this),disabled:this.state.loading,icon:"user",color:"green"})))}}]),t}(React.Component);a()(A,"initialState",{loading:!1,groups:[],errors:{}});var k=function(e){function t(e,n){var o;return s()(this,t),(o=u()(this,m()(t).call(this,e,n))).state={error:null,showModal:!1,modalType:"",user:t.EMPTY_USER,tenants:{},groups:{},activateLoading:!1,settingUserRoleLoading:!1},o}return h()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(this.props.widget,e.widget)||!_.isEqual(this.state,t)||!_.isEqual(this.props.data,e.data)}},{key:"_refreshData",value:function(){this.props.toolbox.refresh()}},{key:"componentDidMount",value:function(){this.props.toolbox.getEventBus().on("users:refresh",this._refreshData,this)}},{key:"componentWillUnmount",value:function(){this.props.toolbox.getEventBus().off("users:refresh",this._refreshData)}},{key:"fetchData",value:function(e){return this.props.toolbox.refresh(e)}},{key:"_selectUser",value:function(e){var t=this.props.toolbox.getContext().getValue("userName");this.props.toolbox.getContext().setValue("userName",e===t?null:e)}},{key:"_getAvailableTenants",value:function(e,n){var o=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.props.toolbox.loading(!0);var r=new g(this.props.toolbox);r.doGetTenants().then((function(r){o.setState({error:null,tenants:r,user:a?n:t.EMPTY_USER,modalType:a?e:"",showModal:a}),o.props.toolbox.loading(!1)})).catch((function(e){o.setState({error:e.message}),o.props.toolbox.loading(!1)}))}},{key:"_getAvailableGroups",value:function(e,t){var n=this;this.props.toolbox.loading(!0),new g(this.props.toolbox).doGetGroups().then((function(o){n.setState({error:null,user:t,groups:o,modalType:e,showModal:!0}),n.props.toolbox.loading(!1)})).catch((function(e){n.setState({error:e.message}),n.props.toolbox.loading(!1)}))}},{key:"_showModal",value:function(e,t){e===f.EDIT_TENANTS_ACTION?this._getAvailableTenants(e,t):e===f.EDIT_GROUPS_ACTION?this._getAvailableGroups(e,t):e===f.ACTIVATE_ACTION?this._activateUser(t):e!==f.DEACTIVATE_ACTION||this._isCurrentUser(t)?e===f.SET_ADMIN_USER_ROLE_ACTION?this._setRole(t,!0):e!==f.SET_DEFAULT_USER_ROLE_ACTION||this._isCurrentUser(t)?this.setState({user:t,modalType:e,showModal:!0}):this._setRole(t,!1):this._deactivateUser(t)}},{key:"_hideModal",value:function(){this.setState({showModal:!1})}},{key:"_handleError",value:function(e){this.setState({error:e})}},{key:"_isCurrentUser",value:function(e){return this.props.toolbox.getManager().getCurrentUsername()===e.username}},{key:"_isUserInAdminGroup",value:function(e){return _.has(e.group_system_roles,Stage.Common.Consts.sysAdminRole)}},{key:"_deleteUser",value:function(){var e=this;this.props.toolbox.loading(!0),new g(this.props.toolbox).doDelete(this.state.user.username).then((function(){e._hideModal(),e.setState({error:null}),e.props.toolbox.loading(!1),e.props.toolbox.refresh()})).catch((function(t){e._hideModal(),e.setState({error:t.message}),e.props.toolbox.loading(!1)}))}},{key:"_setRole",value:function(e,t){var n=this;this.props.toolbox.loading(!0),this.setState({settingUserRoleLoading:e.username}),new g(this.props.toolbox).doSetRole(e.username,Stage.Common.RolesUtil.getSystemRole(t)).then((function(){n.setState({error:null,settingUserRoleLoading:!1}),n.props.toolbox.loading(!1),n._isCurrentUser(e)&&!t?n.props.toolbox.getEventBus().trigger("menu.users:logout"):n.props.toolbox.refresh()})).catch((function(e){n.setState({error:e.message,settingUserRoleLoading:!1}),n.props.toolbox.loading(!1)}))}},{key:"_activateUser",value:function(e){var t=this;this.props.toolbox.loading(!0),this.setState({activateLoading:e.username}),new g(this.props.toolbox).doActivate(e.username).then((function(){t.setState({error:null,activateLoading:!1}),t.props.toolbox.loading(!1),t.props.toolbox.refresh()})).catch((function(e){t.setState({error:e.message,activateLoading:!1}),t.props.toolbox.loading(!1)}))}},{key:"_deactivateUser",value:function(e){var t=this;this.props.toolbox.loading(!0),this.setState({activateLoading:e.username}),new g(this.props.toolbox).doDeactivate(e.username).then((function(){t.setState({error:null,activateLoading:!1}),t.props.toolbox.loading(!1),t._isCurrentUser(e)?t.props.toolbox.getEventBus().trigger("menu.users:logout"):(t.props.toolbox.refresh(),t.props.toolbox.getEventBus().trigger("userGroups:refresh"))})).catch((function(e){t.setState({error:e.message,activateLoading:!1}),t.props.toolbox.loading(!1)}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Checkbox,o=t.Confirm,a=t.DataTable,r=t.ErrorMessage,s=t.Label,i=t.Loader,l=t.Popup,c=Stage.Shared.PasswordModal;return React.createElement("div",null,React.createElement(r,{error:this.state.error,onDismiss:function(){return e.setState({error:null})},autoHide:!0}),React.createElement(a,{fetchData:this.fetchData.bind(this),totalSize:this.props.data.total,pageSize:this.props.widget.configuration.pageSize,sortColumn:this.props.widget.configuration.sortColumn,sortAscending:this.props.widget.configuration.sortAscending,searchable:!0,className:"usersTable",noDataMessage:'There are no Users available in manager. Click "Add" to add Users.'},React.createElement(a.Column,{label:"Username",name:"username",width:"37%"}),React.createElement(a.Column,{label:"Last login",name:"last_login_at",width:"18%"}),React.createElement(a.Column,{label:"Admin",width:"10%"}),React.createElement(a.Column,{label:"Active",name:"active",width:"10%"}),React.createElement(a.Column,{label:"# Groups",width:"10%"}),React.createElement(a.Column,{label:"# Tenants",width:"10%"}),React.createElement(a.Column,{label:"",width:"5%"}),this.props.data.items.map((function(t){var o=function(t,o){return React.createElement(n,{checked:t.isAdmin,disabled:o||t.username===Stage.Common.Consts.adminUsername,onChange:function(){return t.isAdmin?e._showModal(f.SET_DEFAULT_USER_ROLE_ACTION,t):e._showModal(f.SET_ADMIN_USER_ROLE_ACTION,t)},onClick:function(e){e.stopPropagation()}})};return React.createElement(a.RowExpandable,{key:t.username,expanded:t.isSelected},React.createElement(a.Row,{id:"".concat("usersTable","_").concat(t.username),key:t.username,selected:t.isSelected,onClick:e._selectUser.bind(e,t.username)},React.createElement(a.Data,null,t.username),React.createElement(a.Data,null,t.last_login_at),React.createElement(a.Data,{className:"center aligned"},e.state.settingUserRoleLoading===t.username?React.createElement(i,{active:!0,inline:!0,size:"mini"}):e._isUserInAdminGroup(t)&&t.username!==Stage.Common.Consts.adminUsername?React.createElement(l,null,React.createElement(l.Trigger,null,o(t,!0)),React.createElement(l.Content,null,"To remove the administrator privileges for this user, remove the user from the group that is assigned administrator privileges.")):o(t,!1)),React.createElement(a.Data,{className:"center aligned"},e.state.activateLoading===t.username?React.createElement(i,{active:!0,inline:!0,size:"mini"}):React.createElement(n,{checked:t.active,onChange:function(){return t.active?e._showModal(f.DEACTIVATE_ACTION,t):e._showModal(f.ACTIVATE_ACTION,t)},onClick:function(e){e.stopPropagation()}})),React.createElement(a.Data,null,React.createElement(s,{className:"green",horizontal:!0},t.groupCount)),React.createElement(a.Data,null,React.createElement(s,{className:"blue",horizontal:!0},t.tenantCount)),React.createElement(a.Data,{className:"center aligned"},React.createElement(f,{item:t,onSelectAction:e._showModal.bind(e)}))),React.createElement(a.DataExpandable,{key:t.username},React.createElement(b,{data:t,toolbox:e.props.toolbox,onError:e._handleError.bind(e)})))})),React.createElement(a.Action,null,React.createElement(y,{roles:this.props.roles,toolbox:this.props.toolbox}))),React.createElement(c,{open:this.state.modalType===f.CHANGE_PASSWORD_ACTION&&this.state.showModal,username:this.state.user.username,onHide:this._hideModal.bind(this)}),React.createElement(T,{open:this.state.modalType===f.EDIT_TENANTS_ACTION&&this.state.showModal,user:this.state.user,tenants:this.state.tenants,onHide:this._hideModal.bind(this),toolbox:this.props.toolbox}),React.createElement(A,{open:this.state.modalType===f.EDIT_GROUPS_ACTION&&this.state.showModal,user:this.state.user,groups:this.state.groups,onHide:this._hideModal.bind(this),toolbox:this.props.toolbox}),React.createElement(o,{content:"Are you sure you want to remove user ".concat(this.state.user.username,"?"),open:this.state.modalType===f.DELETE_ACTION&&this.state.showModal,onConfirm:this._deleteUser.bind(this),onCancel:this._hideModal.bind(this)}),React.createElement(o,{content:"Are you sure you want to remove your administrator privileges? You will be logged out of the system so the changes take effect.",open:this.state.modalType===f.SET_DEFAULT_USER_ROLE_ACTION&&this.state.showModal,onConfirm:this._setRole.bind(this,this.state.user,!1),onCancel:this._hideModal.bind(this)}),React.createElement(o,{content:"Are you sure you want to deactivate current user and log out?",open:this.state.modalType===f.DEACTIVATE_ACTION&&this.state.showModal,onConfirm:this._deactivateUser.bind(this,this.state.user),onCancel:this._hideModal.bind(this)}))}}]),t}(React.Component);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a()(k,"EMPTY_USER",{username:""}),Stage.defineWidget({id:"userManagement",name:"User management",description:"This widget shows a list of available users and allow managing them",initialWidth:5,initialHeight:16,color:"brown",fetchUrl:{users:"[manager]/users?_get_data=true[params]"},isReact:!0,hasReadme:!0,permission:Stage.GenericConfig.WIDGET_PERMISSION("userManagement"),categories:[Stage.GenericConfig.CATEGORY.SYSTEM_RESOURCES],initialConfiguration:[Stage.GenericConfig.POLLING_TIME_CONFIG(30),Stage.GenericConfig.PAGE_SIZE_CONFIG(),Stage.GenericConfig.SORT_COLUMN_CONFIG("username"),Stage.GenericConfig.SORT_ASCENDING_CONFIG(!0)],render:function(e,t,n,o){if(_.isEmpty(t))return React.createElement(Stage.Basic.Loading,null);var a=o.getContext().getValue("userName"),r=t.users;r=I({},t.users,{items:_.map(r.items,(function(e){return I({},e,{last_login_at:e.last_login_at?Stage.Utils.Time.formatTimestamp(e.last_login_at):"",groupCount:e.groups.length,tenantCount:_.size(e.tenants),isSelected:e.username===a,isAdmin:e.role===Stage.Common.Consts.sysAdminRole||_.has(e.group_system_roles,Stage.Common.Consts.sysAdminRole)})})),total:_.get(t.users,"metadata.pagination.total",0)});var s=_.map(o.getManager().getSystemRoles(),(function(e){return{text:e.description?"".concat(e.name," - ").concat(e.description):e.name,value:e.name}}));return React.createElement(k,{widget:e,data:r,roles:s,toolbox:o})}})},5:function(e,t,n){var o=n(8);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},6:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},7:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},8:function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,o)}e.exports=n}});
\ No newline at end of file
