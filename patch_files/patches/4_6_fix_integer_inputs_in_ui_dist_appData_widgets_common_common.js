diff --git a/dist/appData/widgets/common/common.js b/dist/appData/widgets/common/common.js
index 3cce8c2..e2fbbd7 100644
--- a/dist/appData/widgets/common/common.js
+++ b/dist/appData/widgets/common/common.js
@@ -49,4 +49,4 @@ OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 object-assign
 (c) Sindre Sorhus
 @license MIT
-*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var u in n=Object(arguments[s]))o.call(n,u)&&(l[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)i.call(n,a[c])&&(l[a[c]]=n[a[c]])}}return l}},function(e,t,n){"use strict";n.r(t);var r=n(49),o=n.n(r),i=n(20),a=n.n(i),l=n(74),s=n.n(l),u=n(2),c=n.n(u),p=n(3),f=n.n(p),d=function(){function e(t){c()(this,e),this.toolbox=t}return f()(e,[{key:"doGetExecutions",value:function(e){return this.toolbox.getManager().doGet("/executions?_include=id,status,ended_at",{deployment_id:e})}},{key:"doGetStatus",value:function(e){return this.toolbox.getManager().doGet("/executions?_include=id,status",{id:e})}},{key:"doAct",value:function(e,t){return this.toolbox.getManager().doPost("/executions/"+e.id,null,{deployment_id:e.deployment_id,action:t})}},{key:"waitUntilFinished",value:function(){var e=s()(o.a.mark(function e(t,n){var r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doGetStatus(t);case 2:if(r=e.sent,i=_.filter(r.items,Stage.Common.ExecutionUtils.isActiveExecution),_.isEmpty(i)){e.next=10;break}return e.next=7,new a.a(function(e){return setTimeout(e,n)});case 7:return e.next=9,this.waitUntilFinished(t,n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}();Stage.defineCommon({name:"ExecutionActions",common:d})},function(e,t,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(138),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",u="object"==typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=b;var p="suspendedStart",f="suspendedYield",d="executing",h="completed",m={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==r&&o.call(y,a)&&(g=y);var _=R.prototype=w.prototype=Object.create(g);S.prototype=_.constructor=R,R.constructor=S,R[s]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,R):(e.__proto__=R,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(_),e},c.awrap=function(e){return{__await:e}},C(x.prototype),x.prototype[l]=function(){return this},c.AsyncIterator=x,c.async=function(e,t,n,r){var o=new x(b(e,t,n,r));return c.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},C(_),_[s]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(U),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return l.type="throw",l.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),U(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;U(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function b(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new T(r||[]);return i._invoke=function(e,t,n){var r=p;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=k(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=E(e,t,n);if("normal"===s.type){if(r=n.done?h:f,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function S(){}function R(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(e){var t;this._invoke=function(n,r){function i(){return new Promise(function(t,i){!function t(n,r,i,a){var l=E(e[n],e,r);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&o.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(u).then(function(e){s.value=e,i(s)},a)}a(l.arg)}(n,r,t,i)})}return t=t?t.then(i,i):i()}}function k(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,k(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=E(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=function(e){function t(e,n){return s()(this,t),f()(this,(t.__proto__||a()(t)).call(this,e,n))}return h()(t,e),c()(t,[{key:"render",value:function(){var e=Stage.Basic,t=e.Icon,n=e.Label,r=e.Popup,i=Stage.Common.ExecutionUtils,a=this.props.item,l=a.status_display||a.status,s=this.props.allowShowingPopup&&i.isWaitingExecution(a)&&!_.isEmpty(a.scheduled_for);return this.props.showLabel?React.createElement(r,{on:s?"hover":[]},React.createElement(r.Trigger,null,React.createElement(n,o()({},this.props.labelProps,{onClick:function(e){return e.stopPropagation()}}),React.createElement(t,o()({},i.getExecutionStatusIconParams(a),this.props.iconProps)),this.props.showWorkflowId&&a.workflow_id,this.props.showWorkflowId&&" ",l)),s?React.createElement("span",null,"Scheduled for: ",React.createElement("strong",null,a.scheduled_for)):null):React.createElement(t,o()({},i.getExecutionStatusIconParams(a),this.props.iconProps,{onClick:function(e){return e.stopPropagation()}}))}}]),t}(React.Component);v.propTypes={item:g.a.object.isRequired,labelProps:g.a.object,iconProps:g.a.object,allowShowingPopup:g.a.bool,showLabel:g.a.bool,showWorkflowId:g.a.bool},v.defaultProps={labelProps:{},iconProps:{},allowShowingPopup:!0,showLabel:!0,showWorkflowId:!1},Stage.defineCommon({name:"ExecutionStatus",common:v})},function(e,t,n){"use strict";n.r(t);var r,o=n(23),i=n.n(o),a=n(24),l=n.n(a),s=n(2),u=n.n(s),c=n(3),p=n.n(c),f=function(){function e(){u()(this,e)}return p()(e,null,[{key:"isCancelledExecution",value:function(e){return"cancelled"===e.status}},{key:"isWaitingExecution",value:function(t){return _.includes(e.WAITING_EXECUTION_STATUSES,t.status)}},{key:"isFailedExecution",value:function(e){return"failed"===e.status}},{key:"isSuccessfulExecution",value:function(e){return"terminated"===e.status}},{key:"isUpdateExecution",value:function(e){return"update"===e.workflow_id}},{key:"isActiveExecution",value:function(t){return _.includes(e.ACTIVE_EXECUTION_STATUSES,t.status)}},{key:"getExecutionStatusGroup",value:function(t){return e.isFailedExecution(t)?e.EXECUTION_FAILED:e.isSuccessfulExecution(t)?e.EXECUTION_SUCCESSFUL:e.isCancelledExecution(t)?e.EXECUTION_CANCELLED:e.isWaitingExecution(t)?e.EXECUTION_WAITING:e.EXECUTION_IN_PROGRESS}},{key:"getExecutionStatusIconParams",value:function(t){return e.STATUS_ICON_PARAMS[e.getExecutionStatusGroup(t)]}}]),e}();f.FORCE_RESUME_ACTION="force-resume",f.RESUME_ACTION="resume",f.CANCEL_ACTION="cancel",f.FORCE_CANCEL_ACTION="force-cancel",f.KILL_CANCEL_ACTION="kill",f.EXECUTION_SUCCESSFUL="success",f.EXECUTION_FAILED="failed",f.EXECUTION_CANCELLED="cancelled",f.EXECUTION_WAITING="waiting",f.EXECUTION_IN_PROGRESS="inprogress",f.STATUS_ICON_PARAMS=(r={},l()(r,f.EXECUTION_SUCCESSFUL,{name:"checkmark",color:"green",loading:!1}),l()(r,f.EXECUTION_FAILED,{name:"remove",color:"red",loading:!1}),l()(r,f.EXECUTION_CANCELLED,{name:"ban",color:"orange",loading:!1}),l()(r,f.EXECUTION_WAITING,{name:"clock",color:"black",loading:!1}),l()(r,f.EXECUTION_IN_PROGRESS,{name:"spinner",color:"yellow",loading:!0}),r),f.EXECUTION_STATUSES=["terminated","failed","cancelled","scheduled","queued","pending","started","cancelling","force_cancelling","kill_cancelling"],f.WAITING_EXECUTION_STATUSES=["scheduled","queued"],f.END_EXECUTION_STATUSES=["terminated","failed","cancelled"],f.ACTIVE_EXECUTION_STATUSES=_.difference(f.EXECUTION_STATUSES,[].concat(i()(f.END_EXECUTION_STATUSES),i()(f.WAITING_EXECUTION_STATUSES))),Stage.defineCommon({name:"ExecutionUtils",common:f})},function(e,t,n){e.exports={default:n(142),__esModule:!0}},function(e,t,n){n(35),n(143),e.exports=n(8).Array.from},function(e,t,n){"use strict";var r=n(21),o=n(11),i=n(29),a=n(62),l=n(63),s=n(41),u=n(144),c=n(64);o(o.S+o.F*!n(69)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,p,f=i(e),d="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,v=0,y=c(f);if(g&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==y||d==Array&&l(y))for(n=new d(t=s(f.length));t>v;v++)u(n,v,g?m(f[v],v):f[v]);else for(p=y.call(f),n=new d;!(o=p.next()).done;v++)u(n,v,g?a(p,m,[o.value,v],!0):o.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(13),o=n(26);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doGetTextFileContent",value:function(e){return this.toolbox.getInternal().doUpload("/file/text",null,{file:e},"post",!1)}},{key:"doGetYamlFileContent",value:function(e){return this.toolbox.getInternal().doUpload("/file/yaml",null,{file:e},"post")}}]),e}();Stage.defineCommon({name:"FileActions",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"render",value:function(){var e=Stage.Basic,t=e.CopyToClipboardButton,n=e.Label,r=e.Popup;return React.createElement(r,{wide:!0,hoverable:!0,position:"right center"},React.createElement(r.Trigger,null,React.createElement(n,{style:{opacity:this.props.selected?"1":"0.2"}},this.props.label)),React.createElement(r.Content,null,React.createElement("div",{className:"noWrap"},React.createElement(t,{content:"Copy "+this.props.label,text:this.props.id}),"  ",React.createElement("strong",null,this.props.id))))}}]),t}(React.Component);m.propTypes={label:h.a.string,id:h.a.string,selected:h.a.bool},m.defaultProps={label:"ID",id:"",selected:!0},Stage.defineCommon({name:"IdPopup",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doGetMetric",value:function(e,t,n,r,o,i,a){var l={};return _.isEmpty(o)||(l.from=o),_.isEmpty(i)||(l.to=i),_.isEmpty(a)||(l.timeGroup=a),this.toolbox.getInternal().doGet("/monitor/byMetric/"+(e||"*")+"/"+(t||"*")+"/"+(n||"*")+"/"+(r||"*"),l)}},{key:"doGetMetrics",value:function(e,t,n){return this.toolbox.getInternal().doGet("/monitor/metrics/"+(e||"*")+"/"+(t||"*")+"/"+(n||"*"))}},{key:"doRunQuery",value:function(e,t,n){return this.toolbox.getInternal().doGet("/monitor/query",{qSelect:e,qFrom:t,qWhere:n})}}]),e}();Stage.defineCommon({name:"InfluxActions",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"shouldComponentUpdate",value:function(e){return!_.isEqual(this.props,e)}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Form,r=t.Header,o=t.List,i=t.PopupHelp,a=function(){return React.createElement(r,{size:"tiny"},e.props.header,React.createElement(r.Subheader,null,"See values typing details: ",React.createElement(i,{flowing:!0,header:"Value type",content:React.createElement("div",null,"Values are casted to types, e.g.:",React.createElement(o,{bulleted:!0},React.createElement(o.Item,null,React.createElement("strong",null,"[1, 2]")," will be casted to an array"),React.createElement(o.Item,null,React.createElement("strong",null,"524")," will be casted to a number")),"Surround value with ",React.createElement("strong",null,'"')," to explicitly declare it as a string, e.g.:",React.createElement(o,{bulleted:!0},React.createElement(o.Item,null,React.createElement("strong",null,'"{"a":"b"}"')," will be send as string not an object"),React.createElement(o.Item,null,React.createElement("strong",null,'"true"')," will be send as string not a boolean value")),"Use ",React.createElement("strong",null,'""')," for an empty string.")})))};return this.props.dividing?React.createElement(n.Divider,{style:this.props.compact?{marginTop:0}:{}},React.createElement(a,null)):React.createElement(a,null)}}]),t}(React.Component);m.propTypes={compact:h.a.bool,dividing:h.a.bool,header:h.a.string},m.defaultProps={compact:!1,dividing:!0,header:"Deployment inputs"},Stage.defineCommon({name:"InputsHeader",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=function(){function e(){a()(this,e)}return s()(e,null,[{key:"getEnhancedStringValue",value:function(t){var n=Stage.Common.JsonUtils,r=n.getStringValue(t);if(""===r)return e.EMPTY_STRING;var o=n.toType(t),i=n.getTypedValue(r);return o!==n.toType(i)&&(r='"'+r+'"'),r}},{key:"getInputFieldInitialValue",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(_.isNil(t))switch(n){case"boolean":return e.DEFAULT_VALUE_BOOLEAN;case"integer":return e.DEFAULT_VALUE_NUMBER;case"string":default:return e.DEFAULT_VALUE_STRING}else switch(n){case"boolean":case"integer":return t;case"string":default:return e.getEnhancedStringValue(t)}}},{key:"getRevertToDefaultIcon",value:function(t,n,r,o){var i=Stage.Basic.RevertToDefaultIcon,a=Stage.Common.JsonUtils,l=a.getStringValue(n),s=_.startsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.endsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.size(l)>1?l.slice(1,-1):a.getTypedValue(n),u=r,c=e.getInputFieldInitialValue(r,a.toCloudifyType(u));return _.isNil(u)?void 0:React.createElement(i,{value:s,defaultValue:u,onClick:function(){return o(null,{name:t,value:c})}})}},{key:"getFormInputField",value:function(t,n,r,o,i,a,l){var s=Stage.Basic.Form;switch(l){case"boolean":return React.createElement(s.Field,{key:t,help:o,required:_.isNil(r)},e.getInputField(t,n,r,i,a,l));case"integer":return React.createElement(s.Field,{key:t,error:a,help:o,required:_.isNil(r),label:t},e.getInputField(t,n,r,i,a,l));case"string":default:return React.createElement(s.Field,{key:t,error:a,help:o,required:_.isNil(r),label:t},e.getInputField(t,n,r,i,a,l))}}},{key:"getInputField",value:function(t,n,r,o,i,a){var l=Stage.Basic.Form;switch(a){case"boolean":return React.createElement(React.Fragment,null,React.createElement(l.Checkbox,{name:t,toggle:!0,label:t,checked:n,onChange:o}),"   ",e.getRevertToDefaultIcon(t,n,r,o));case"integer":return React.createElement(l.Input,{name:t,value:n,fluid:!0,error:!!i,type:"number",icon:e.getRevertToDefaultIcon(t,n,r,o),onChange:o});case"string":default:return _.includes(n,"\n")?React.createElement(l.Group,null,React.createElement(l.Field,{width:15},React.createElement(l.TextArea,{name:t,value:n,onChange:o})),React.createElement(l.Field,{width:1,style:{textAlign:"center"}},e.getRevertToDefaultIcon(t,n,r,o))):React.createElement(l.Input,{name:t,value:n,fluid:!0,error:!!i,icon:e.getRevertToDefaultIcon(t,n,r,o),onChange:o})}}},{key:"getInputFields",value:function(t,n,r,i){var a=_.sortBy(_.map(t,function(e,t){return o()({name:t},e)}),[function(e){return!_.isNil(e.default)},"name"]);return _.map(a,function(t){return e.getFormInputField(t.name,r[t.name],t.default,t.description,n,i[t.name],t.type)})}},{key:"getInputsInitialValuesFrom",value:function(t){var n={};return _.forEach(t,function(t,r){n[r]=e.getInputFieldInitialValue(t.default,t.type)}),n}},{key:"validateInputTypes",value:function(e,t){var n=[],r=!0;if(_.forEach(e,function(e,o){var i=e.type,a=t[o];if(!_.isUndefined(i)&&!_.isUndefined(a)){var l=Stage.Common.JsonUtils.toCloudifyType(a);"boolean"!==i&&"integer"!==i||i===l||(n.push(o),r=!1)}}),!r)throw new Error("The following fields have invalid types: "+_.join(n,", ")+".")}},{key:"getUpdatedInputs",value:function(t,n,r){var o={};return e.validateInputTypes(t,r),_.forEach(t,function(t,i){var a=r[i],l=n[i];_.isNil(a)?o[i]=l:o[i]=e.getInputFieldInitialValue(a,t.type)}),o}},{key:"getInputsToSend",value:function(t,n,r){var o=Stage.Common.JsonUtils,i={};return _.forEach(t,function(t,a){var l=n[a],s=o.getTypedValue(l);_.isEmpty(l)&&_.isNil(t.default)?r[a]=!0:_.startsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.endsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.size(l)>1&&(s=l.slice(1,-1)),_.isEqual(s,t.default)||(i[a]=s)}),i}},{key:"addErrors",value:function(e,t){_.forEach(_.keys(e),function(e){return t[e]="Please provide "+e})}}]),e}();u.DEFAULT_VALUE_STRING="",u.DEFAULT_VALUE_NUMBER=0,u.DEFAULT_VALUE_BOOLEAN=!1,u.STRING_VALUE_SURROUND_CHAR='"',u.EMPTY_STRING='""',Stage.defineCommon({name:"InputsUtils",common:u})},function(e,t,n){"use strict";n.r(t);var r=n(50),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=function(){function e(){a()(this,e)}return s()(e,null,[{key:"stringify",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&""===t)return"";var r=t;return"object"!==e.toType(t)&&"array"!==e.toType(t)||(r=o()(t,null,n?2:0)),_.trim(r,'"')}},{key:"stringToJson",value:function(e){try{return JSON.parse(e)}catch(t){return e}}},{key:"toType",value:function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}},{key:"toCloudifyType",value:function(t){var n=e.toType(t);switch(n){case"boolean":case"string":return n;case"number":return"integer";case"array":case"object":default:return}}},{key:"getStringValue",value:function(t){var n=null;switch(e.toType(t)){case"array":case"object":n=o()(t);break;case"boolean":case"string":case"number":default:n=String(t)}return n}},{key:"getTypedValue",value:function(t){if("string"===e.toType(t)){if("true"===t)return!0;if("false"===t)return!1;var n=Number(t);if(!isNaN(n))return n;var r=null;try{r=JSON.parse(t)}catch(e){return t}return r}return t}}]),e}();Stage.defineCommon({name:"JsonUtils",common:u})},function(e,t,n){var r=n(8),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=function(e){function t(e,n){s()(this,t);var r=f()(this,(t.__proto__||a()(t)).call(this,e,n));return r.state={errorModalOpen:!1,open:!1},r}return h()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.CancelButton,r=t.Button,i=t.CopyToClipboardButton,a=t.HighlightText,l=t.Icon,s=t.Table,u=t.Modal,c=t.Popup,p=Stage.Common,f=p.ExecutionStatus,d=p.ExecutionUtils,h=o()({workflow_id:"",status:""},this.props.execution),m=!!h.scheduled_for,g=m?5:4;return _.isEmpty(h.status)?null:React.createElement(React.Fragment,null,React.createElement(c,{wide:"very",on:"hover",hoverable:!0,open:this.state.open,onOpen:function(){return e.setState({open:!0})},onClose:function(){return e.setState({open:!1})},onClick:function(t){t.stopPropagation(),e.setState({open:!1})}},React.createElement(c.Trigger,null,React.createElement("div",{style:{display:"inline-block"}},React.createElement(f,{item:h,allowShowingPopup:!1,showLabel:this.props.showLabel,showWorkflowId:this.props.showLabel,labelProps:{attached:this.props.labelAttached?"top left":void 0},iconProps:{attached:this.props.showLabel?void 0:"top left",size:"large"}}))),React.createElement(c.Header,null,"Last Execution"),React.createElement(c.Content,null,React.createElement(s,{compact:!0,celled:!0},React.createElement(s.Header,null,React.createElement(s.Row,{textAlign:"center"},React.createElement(s.HeaderCell,null,"Workflow"),React.createElement(s.HeaderCell,null,"Status"),React.createElement(s.HeaderCell,null,"Created"),m&&React.createElement(s.HeaderCell,null,"Scheduled"),React.createElement(s.HeaderCell,null,"Ended"))),React.createElement(s.Body,null,React.createElement(s.Row,{textAlign:"center"},React.createElement(s.Cell,null,h.workflow_id),React.createElement(s.Cell,null,h.status_display||h.status),React.createElement(s.Cell,null,Stage.Utils.formatTimestamp(h.created_at)),m&&React.createElement(s.Cell,null,Stage.Utils.formatTimestamp(h.scheduled_for)),React.createElement(s.Cell,null,Stage.Utils.formatTimestamp(h.ended_at)))),React.createElement(s.Footer,{fullWidth:!0},React.createElement(s.Row,{textAlign:"center"},React.createElement(s.HeaderCell,{colSpan:g},d.isFailedExecution(h)&&React.createElement(r,{icon:!0,labelPosition:"left",color:"red",onClick:function(){return e.setState({errorModalOpen:!0})}},React.createElement(l,{name:"remove"}),"Show Error"),React.createElement(r,{icon:!0,labelPosition:"left",color:"grey",onClick:this.props.onShowLogs},React.createElement(l,{name:"file text"}),"Show Logs"),d.isUpdateExecution(h)&&React.createElement(r,{icon:!0,labelPosition:"left",color:"blue",onClick:function(){return e.props.onShowUpdateDetails(_.get(h,"parameters.update_id"))}},React.createElement(l,{name:"magnify"}),"Show Update Details"))),React.createElement(s.Row,{textAlign:"center"},React.createElement(s.HeaderCell,{colSpan:g},(d.isCancelledExecution(h)||d.isFailedExecution(h))&&React.createElement(r,{icon:!0,labelPosition:"left",color:"green",onClick:function(){return e.props.onActOnExecution(h,d.FORCE_RESUME_ACTION)}},React.createElement(l,{name:"play"}),"Resume"),(d.isActiveExecution(h)||d.isWaitingExecution(h))&&React.createElement(r,{icon:!0,labelPosition:"left",color:"yellow",onClick:function(){return e.props.onActOnExecution(h,d.CANCEL_ACTION)}},React.createElement(l,{name:"cancel"}),"Cancel"),(d.isActiveExecution(h)||d.isWaitingExecution(h))&&React.createElement(r,{icon:!0,labelPosition:"left",color:"orange",onClick:function(){return e.props.onActOnExecution(h,d.FORCE_CANCEL_ACTION)}},React.createElement(l,{name:"cancel"}),"Force Cancel"),React.createElement(r,{icon:!0,labelPosition:"left",color:"red",onClick:function(){return e.props.onActOnExecution(h,d.KILL_CANCEL_ACTION)}},React.createElement(l,{name:"stop"}),"Kill Cancel"))))))),d.isFailedExecution(h)&&React.createElement(u,{open:this.state.errorModalOpen,onClose:function(){return e.setState({errorModalOpen:!1})}},React.createElement(u.Header,null,"Error message from '",h.workflow_id,"' worfklow execution on '",h.deployment_id,"' deployment"),React.createElement(u.Content,null,React.createElement(a,null,h.error)),React.createElement(u.Actions,null,React.createElement(i,{content:"Copy Error",text:h.error}),React.createElement(n,{onClick:function(t){t.stopPropagation(),e.setState({errorModalOpen:!1})},content:"Close"}))))}}]),t}(React.Component);v.propTypes={execution:g.a.object,onShowLogs:g.a.func,onShowUpdateDetails:g.a.func,onActOnExecution:g.a.func,showLabel:g.a.bool,labelAttached:g.a.bool},v.defaultProps={execution:{workflow_id:"",status:""},onShowLogs:_.noop,onShowUpdateDetails:_.noop,onActOnExecution:_.noop,showLabel:!1,labelAttached:!0},t.default=v,Stage.defineCommon({name:"LastExecutionStatusIcon",common:v})},function(e,t){Stage.defineCommon({name:"NodeInstancesConsts",common:{groupStates:[{name:"uninitialized",icon:"cancel",colorSUI:"blue",colorHTML:"#2185d0",states:["uninitialized"]},{name:"in progress",icon:"spinner",colorSUI:"yellow",colorHTML:"#fbbd08",states:["initializing","creating","created","configuring","configured","starting","stopping","stopped","deleting"]},{name:"started",icon:"checkmark",colorSUI:"green",colorHTML:"#21ba45",states:["started"]},{name:"deleted",icon:"trash",colorSUI:"black",colorHTML:"#1b1c1d",states:["deleted"]}]}})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doDelete",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.toolbox.getManager().doDelete("/plugins/"+e.id,null,{force:t})}},{key:"doUpload",value:function(e,t,n,r,o){var i={visibility:e};_.isEmpty(t)||(i.wagonUrl=t),_.isEmpty(n)||(i.yamlUrl=n);var a={};return r&&(a.wagon_file=r),o&&(a.yaml_file=o),this.toolbox.getInternal().doUpload("/plugins/upload",i,_.isEmpty(a)?null:a,"post")}},{key:"doDownload",value:function(e){var t="/plugins/"+e.id+"/archive",n=e.package_name+"_"+e.package_version+".zip";return this.toolbox.getManager().doDownload(t,n)}},{key:"doSetVisibility",value:function(e,t){return this.toolbox.getManager().doPatch("/plugins/"+e+"/set-visibility",null,{visibility:t})}}]),e}();Stage.defineCommon({name:"PluginActions",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),i=n(4),a=n.n(i),l=n(5),s=n.n(l),u=n(2),c=n.n(u),p=n(3),f=n.n(p),d=n(6),h=n.n(d),m=n(7),g=n.n(m),v=function(e){function t(e,n){c()(this,t);var r=h()(this,(t.__proto__||s()(t)).call(this,e,n));return r.state=t.initialState,r}return g()(t,e),f()(t,[{key:"onApprove",value:function(){return this._submitRole(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.setState(a()({},t.initialState,{role:this.props.resource.role}))}},{key:"_submitRole",value:function(){var e=this,t={};if(_.isEmpty(this.state.role)&&(t.role="Please provide a role"),!_.isEmpty(t))return this.setState({errors:t}),!1;this.setState({loading:!0}),this.props.onSetRole(this.props.resource.name,this.state.role).then(function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.onHide()}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"_handleInputChange",value:function(e,t){this.setState(Stage.Basic.Form.fieldNameValue(t))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Modal,r=t.Icon,i=t.Form,a=t.ApproveButton,l=t.CancelButton,s=o()({},{name:""},this.props.resource);return React.createElement(n,{open:this.props.open,onClose:function(){return e.props.onHide()},className:"roleModal"},React.createElement(n.Header,null,React.createElement(r,{name:"male"})," Set role for ",s.name),React.createElement(n.Content,null,React.createElement(i,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(i.Field,{error:this.state.errors.role},React.createElement(i.Dropdown,{selection:!0,name:"role",placeholder:"Role",options:this.props.roles,value:this.state.role,onChange:this._handleInputChange.bind(this)})))),React.createElement(n.Actions,null,React.createElement(l,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(a,{onClick:this.onApprove.bind(this),disabled:this.state.loading,icon:"male",color:"green"})))}}]),t}(React.Component);v.initialState={loading:!1,role:"",errors:{}},t.default=v,Stage.defineCommon({name:"RoleModal",common:v})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"_handleInputChange",value:function(e,t){this.props.onUpdate(t.name,t.value)}},{key:"render",value:function(){var e=this,t=Stage.Basic.Form,n=_.reverse(_.map(_.filter(this.props.toolbox.getManager()._data.roles,{type:"tenant_role"}),function(e){return{text:e.name,value:e.name}}));return React.createElement("span",null,_.map(this.props.resources,function(r,o){return React.createElement(t.Field,{key:o,label:"Choose a role for "+e.props.resourceName+" "+o+":"},React.createElement(t.Dropdown,{placeholder:"Choose a role",selection:!0,options:n,name:o,value:r,onChange:e._handleInputChange.bind(e)}))}))}}]),t}(React.Component);m.propTypes={onUpdate:h.a.func.isRequired,resources:h.a.object.isRequired,resourceName:h.a.string.isRequired,toolbox:h.a.object.isRequired},t.default=m,Stage.defineCommon({name:"RolesPicker",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"render",value:function(){var e="";return _.forEach(_.omit(this.props.groupRoles,this.props.directRole),function(t,n){e+=n+" ("+t.join(", ")+"), "}),e=e.slice(0,-2),_.isEmpty(this.props.groupRoles)?this.props.directRole&&React.createElement("span",null,this.props.directRole):_.has(this.props.groupRoles,this.props.directRole)?_.isEmpty(e)?React.createElement("span",null,this.props.directRole," (",this.props.groupRoles[this.props.directRole].join(", "),")"):React.createElement("span",null,this.props.directRole," (",this.props.groupRoles[this.props.directRole].join(", "),"), ",e):this.props.directRole?React.createElement("span",null,this.props.directRole,", ",e):React.createElement("span",null,e)}}]),t}(React.Component);m.propTypes={groupRoles:h.a.object,directRole:h.a.string},t.default=m,Stage.defineCommon({name:"RolesPresenter",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(){o()(this,e)}return a()(e,null,[{key:"getTenantRoles",value:function(e){return _.filter(e,{type:"tenant_role"})}},{key:"getDefaultRoleName",value:function(e){return _.reverse(this.getTenantRoles(e))[0].name}},{key:"getSystemRole",value:function(e){return e?Stage.Common.Consts.sysAdminRole:Stage.Common.Consts.defaultUserRole}}]),e}();Stage.defineCommon({name:"RolesUtil",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doGet",value:function(e){return this.toolbox.getManager().doGet("/secrets/"+e)}},{key:"doDelete",value:function(e){return this.toolbox.getManager().doDelete("/secrets/"+e)}},{key:"doCreate",value:function(e,t,n,r){return this.toolbox.getManager().doPut("/secrets/"+e,null,{value:t,visibility:n,is_hidden_value:r})}},{key:"doUpdate",value:function(e,t){return this.toolbox.getManager().doPatch("/secrets/"+e,null,{value:t})}},{key:"doSetIsHiddenValue",value:function(e,t){return this.toolbox.getManager().doPatch("/secrets/"+e,null,{is_hidden_value:t})}},{key:"doSetVisibility",value:function(e,t){return this.toolbox.getManager().doPatch("/secrets/"+e+"/set-visibility",null,{visibility:t})}}]),e}();Stage.defineCommon({name:"SecretActions",common:l})},function(e,t){Stage.defineCommon({name:"TimeConsts",common:{MAX_TIME_RESOLUTION_VALUE:1e3,MIN_TIME_RESOLUTION_VALUE:1,TIME_RESOLUTION_UNITS:[{name:"microseconds",text:"microseconds",value:"u"},{name:"milliseconds",text:"milliseconds",value:"ms"},{name:"seconds",text:"seconds",value:"s"},{name:"minutes",text:"minutes",value:"m"},{name:"hours",text:"hours",value:"h"},{name:"days",text:"days",value:"d"},{name:"weeks",text:"weeks",value:"w"}]}})},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),i=n(4),a=n.n(i),l=n(5),s=n.n(l),u=n(2),c=n.n(u),p=n(3),f=n.n(p),d=n(6),h=n.n(d),m=n(7),g=n.n(m),v=n(0),y=n.n(v),b=function(e){function t(e,n){c()(this,t);var r=h()(this,(t.__proto__||s()(t)).call(this,e,n));return r.state=t.initialState(e),r}return g()(t,e),f()(t,[{key:"componentDidUpdate",value:function(e){var n=this;!e.open&&this.props.open&&(this.setState({loading:!0}),new Stage.Common.BlueprintActions(this.props.toolbox).doGetBlueprints().then(function(e){n.setState(a()({},t.initialState(n.props),{blueprints:e}))}).catch(function(e){n.setState({loading:!1,error:e.message})}).then(function(){n._selectBlueprint({},{value:n.props.deployment.blueprint_id})}))}},{key:"onApprove",value:function(){return this._submitUpdate(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"_submitUpdate",value:function(){var e=this,t=Stage.Common.InputsUtils,n={};_.isEmpty(this.state.blueprint.id)&&(n.blueprintName="Please select blueprint");var r={},o=Stage.Common.InputsUtils.getInputsToSend(this.state.blueprint.plan.inputs,this.state.deploymentInputs,r);if(t.addErrors(r,n),!_.isEmpty(n))return this.setState({errors:n}),!1;this.setState({loading:!0}),new Stage.Common.DeploymentActions(this.props.toolbox).doUpdate(this.props.deployment.id,this.state.blueprint.id,o,this.state.installWorkflow,this.state.uninstallWorkflow,this.state.installWorkflowFirst,this.state.ignoreFailure,this.state.automaticReinstall,this.state.reinstallList,this.state.force).then(function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.onHide(),e.props.toolbox.getEventBus().trigger("nodes:refresh"),e.props.toolbox.getEventBus().trigger("inputs:refresh"),e.props.toolbox.getEventBus().trigger("outputs:refresh"),e.props.toolbox.getEventBus().trigger("executions:refresh")}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"_handleInputChange",value:function(e,t){var n=Stage.Basic.Form.fieldNameValue(t);this.setState(n)}},{key:"_handleDeploymentInputChange",value:function(e,t){var n=Stage.Basic.Form.fieldNameValue(t);this.setState({deploymentInputs:a()({},this.state.deploymentInputs,n)})}},{key:"_handleYamlFileChange",value:function(e){var t=this;if(e){var n=Stage.Common,r=n.FileActions,o=n.InputsUtils,i=new r(this.props.toolbox);this.setState({fileLoading:!0}),i.doGetYamlFileContent(e).then(function(e){var n=o.getUpdatedInputs(t.state.blueprint.plan.inputs,t.state.deploymentInputs,e);t.setState({errors:{},deploymentInputs:n,fileLoading:!1})}).catch(function(e){var n="Loading values from YAML file failed: "+(_.isString(e)?e:e.message);t.setState({errors:{yamlFile:n},fileLoading:!1})})}}},{key:"_selectBlueprint",value:function(e,t){var n=this;_.isEmpty(t.value)?this.setState({blueprint:Stage.Common.DeployBlueprintModal.EMPTY_BLUEPRINT,errors:{}}):(this.setState({loading:!0}),new Stage.Common.BlueprintActions(this.props.toolbox).doGetFullBlueprintData({id:t.value}).then(function(e){var t={},r=n.props.deployment.inputs;_.forEach(e.plan.inputs,function(e,n){t[n]=Stage.Common.InputsUtils.getInputFieldInitialValue(r[n],e.type)}),n.setState({deploymentInputs:t,blueprint:e,errors:{},loading:!1})}).catch(function(e){n.setState({blueprint:Stage.Common.DeployBlueprintModal.EMPTY_BLUEPRINT,loading:!1,errors:{error:e.message}})}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,r=t.CancelButton,i=t.Form,a=t.Header,l=t.Icon,s=t.Message,u=t.Modal,c=t.NodeInstancesFilter,p=Stage.Common,f=p.InputsHeader,d=p.InputsUtils,h=p.YamlFileButton,m=o()({},{items:[]},this.state.blueprints),g=_.map(m.items,function(e){return{text:e.id,value:e.id}});return React.createElement(u,{open:this.props.open,onClose:function(){return e.props.onHide()},className:"updateDeploymentModal"},React.createElement(u.Header,null,React.createElement(l,{name:"edit"})," Update deployment ",this.props.deployment.id),React.createElement(u.Content,null,React.createElement(i,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(i.Field,{error:this.state.errors.blueprintName,label:"Blueprint",required:!0},React.createElement(i.Dropdown,{search:!0,selection:!0,value:this.state.blueprint.id,placeholder:"Select Blueprint",name:"blueprintName",options:g,onChange:this._selectBlueprint.bind(this)})),this.state.blueprint.id&&React.createElement(React.Fragment,null,!_.isEmpty(this.state.blueprint.plan.inputs)&&React.createElement(h,{onChange:this._handleYamlFileChange.bind(this),dataType:"deployment's inputs",fileLoading:this.state.fileLoading}),React.createElement(f,null),_.isEmpty(this.state.blueprint.plan.inputs)&&React.createElement(s,{content:"No inputs available for the selected blueprint"})),d.getInputFields(this.state.blueprint.plan.inputs,this._handleDeploymentInputChange.bind(this),this.state.deploymentInputs,this.state.errors),React.createElement(i.Divider,null,React.createElement(a,{size:"tiny"},"Actions")),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run install workflow",toggle:!0,name:"installWorkflow",help:"Run install lifecycle operations",checked:this.state.installWorkflow,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run uninstall workflow",toggle:!0,name:"uninstallWorkflow",help:"Run uninstall lifecycle operations",checked:this.state.uninstallWorkflow,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run install workflow first",help:"Run install workflow first and then uninstall workflow. Default: first uninstall and then install",toggle:!0,name:"installWorkflowFirst",checked:this.state.installWorkflowFirst,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Ignore failures in uninstall workflow",toggle:!0,name:"ignoreFailure",help:"Supply the parameter `ignore_failure` with the value `true` to the uninstall workflow",checked:this.state.ignoreFailure,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run automatic reinstall",name:"automaticReinstall",toggle:!0,help:'Automatically reinstall node instances that their properties has been modified, as part of a deployment update. If not set, then node instances that were explicitly given to "Reinstall node instances list" will still be reinstalled',checked:this.state.automaticReinstall,onChange:this._handleInputChange.bind(this)})),React.createElement(c,{name:"reinstallList",deploymentId:this.props.deployment.id,label:"Reinstall node instances list",value:this.state.reinstallList,placeholder:"Choose node instances to reinstall",upward:!0,onChange:this._handleInputChange.bind(this),help:'Node instances ids to be reinstalled as part of deployment update. They will be reinstalled even if "Run automatic reinstall" is not set'}),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Force update",name:"force",toggle:!0,help:"Force running update in case a previous update on this deployment has failed to finished successfully",checked:this.state.force,onChange:this._handleInputChange.bind(this)})))),React.createElement(u.Actions,null,React.createElement(r,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(n,{onClick:this.onApprove.bind(this),disabled:this.state.loading,content:"Update",icon:"edit",color:"green"})))}}]),t}(React.Component);b.initialState=function(e){return{loading:!1,errors:{},blueprints:[],yamlFile:null,fileLoading:!1,blueprint:Stage.Common.DeployBlueprintModal.EMPTY_BLUEPRINT,deploymentInputs:a()({},e.deployment.inputs),installWorkflow:!0,uninstallWorkflow:!0,installWorkflowFirst:!1,ignoreFailure:!1,automaticReinstall:!0,reinstallList:[],force:!1}},b.propTypes={toolbox:y.a.object.isRequired,open:y.a.bool.isRequired,deployment:y.a.object.isRequired,onHide:y.a.func.isRequired},Stage.defineCommon({name:"UpdateDeploymentModal",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(23),o=n.n(r),i=n(51),a=n.n(i),l=n(4),s=n.n(l),u=n(5),c=n.n(u),p=n(2),f=n.n(p),d=n(3),h=n.n(d),m=n(6),g=n.n(m),v=n(7),y=n.n(v),b=n(0),E=n.n(b),w=n(75),S=function(e){function t(e,n){f()(this,t);var r=g()(this,(t.__proto__||c()(t)).call(this,e,n));return r.state=s()({},t.initialState),r}return y()(t,e),h()(t,[{key:"componentDidUpdate",value:function(e){var n=this;!e.open&&this.props.open?(this.setState({loading:!0}),new Stage.Common.DeploymentUpdatesActions(this.props.toolbox).doGetUpdate(this.props.deploymentUpdateId).then(function(e){n.setState({loading:!1,error:null,deploymentUpdate:e})}).catch(function(e){n.setState({loading:!1,error:e.message,deploymentUpdate:t.EMPTY_DEPLOYMENT_UPDATE})})):e.open&&!this.props.open&&this.setState(s()({},t.initialState))}},{key:"_getDiff",value:function(e,t){var n=Object(w.diffChars)(String(e),String(t));return React.createElement("div",null,_.map(n,function(e,t){var n=e.added?{color:"green"}:e.removed?{color:"red",textDecoration:"line-through"}:null;return React.createElement("span",{key:"part_"+t,style:n},e.value)}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.CancelButton,r=t.Form,i=t.Header,l=t.Icon,s=t.Modal,u=t.Table,c=t.Popup,p=t.ParameterValue,f=t.ParameterValueDescription,d=Stage.Common.JsonUtils,h=this.state.deploymentUpdate,m=a()(_.keys(h.old_inputs)),g=a()(_.keys(h.new_inputs)),v=_.uniq([].concat(o()(m),o()(g))),y=!_.isEqual(h.old_inputs,h.new_inputs),b=h.old_blueprint_id,E=h.new_blueprint_id,w=b!==E;return React.createElement("div",null,React.createElement(s,{open:this.props.open,onClose:function(){return e.props.onClose()},className:"updateDetailsModal"},React.createElement(s.Header,null,"Update details"),React.createElement(s.Content,null,React.createElement(r,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(i,{size:"tiny"},"Blueprint"),w?React.createElement("span",null,"Changed from ",React.createElement("strong",null,b)," into ",React.createElement("strong",null,E),"."):React.createElement("span",null,"Not changed."),React.createElement(i,{size:"tiny"},"Inputs",y&&React.createElement(i.Subheader,null,"To see difference between old and new inputs hover over ",React.createElement(l,{name:"asterisk",color:"red",size:"tiny",className:"superscripted"}))),y?React.createElement(u,null,React.createElement(u.Header,null,React.createElement(u.Row,null,React.createElement(u.HeaderCell,null),React.createElement(u.HeaderCell,null,"Old ",React.createElement(f,null)),React.createElement(u.HeaderCell,null,"New ",React.createElement(f,null)))),React.createElement(u.Body,null,_.map(v,function(t){var n=_.get(h.old_inputs,t,""),r=d.getStringValue(n),o=_.get(h.new_inputs,t,""),i=d.getStringValue(o),a=!_.isEqual(r,i);return React.createElement(u.Row,{key:t},React.createElement(u.Cell,null,t),React.createElement(u.Cell,null,React.createElement(p,{value:n,showCopyButton:!1})),React.createElement(u.Cell,null,React.createElement(p,{value:o,showCopyButton:!1}),a&&React.createElement(c,null,React.createElement(c.Trigger,null,React.createElement(l,{name:"asterisk",color:"red",size:"tiny",className:"superscripted"})),React.createElement(c.Content,null,e._getDiff(r,i)))))}))):React.createElement("span",null,"No inputs changed."))),React.createElement(s.Actions,null,React.createElement(n,{onClick:this.props.onClose,content:"Close"}))))}}]),t}(React.Component);S.initialState={loading:!1,error:null,deploymentUpdate:s()({},S.EMPTY_DEPLOYMENT_UPDATE)},S.EMPTY_DEPLOYMENT_UPDATE={old_inputs:{},new_inputs:{},old_blueprint_id:"",new_blueprint_id:""},S.propTypes={toolbox:E.a.object.isRequired,open:E.a.bool.isRequired,deploymentUpdateId:E.a.string},t.default=S,Stage.defineCommon({name:"UpdateDetailsModal",common:S})},function(e,t,n){n(164),e.exports=n(8).Array.sort},function(e,t,n){"use strict";var r=n(11),o=n(25),i=n(29),a=n(16),l=[].sort,s=[1,2,3];r(r.P+r.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n(165)(l)),"Array",{sort:function(e){return void 0===e?l.call(i(this)):l.call(i(this),o(e))}})},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=n(1),y=n.n(v),b=function(e){function t(e){s()(this,t);var n=f()(this,(t.__proto__||a()(t)).call(this,e));return n.state=t.initialState,n.blueprintFileRef=y.a.createRef(),n.imageFileRef=y.a.createRef(),n.actions=new Stage.Common.BlueprintActions(e.toolbox),n}return h()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this;this.blueprintFileRef.current&&this.blueprintFileRef.current.reset(),this.imageFileRef.current&&this.imageFileRef.current.reset(),this.setState(t.initialState),(!_.isEmpty(this.props.blueprintUrl)&&Stage.Utils.isUrl(this.props.blueprintUrl)||!_.isNil(this.props.blueprintFile))&&(this.setState({loading:!0}),this.actions.doListYamlFiles(this.props.blueprintUrl,this.props.blueprintFile,!1).then(function(t){e.setState({yamlFiles:t,loading:!1})}).catch(function(t){e.setState({yamlFiles:[],loading:!1}),e.props.onChange({errors:{error:t}})}))}},{key:"_handleInputChange",value:function(e,n){this.props.onChange(o()({},t.NO_ERRORS,Stage.Basic.Form.fieldNameValue(n)))}},{key:"_onBlueprintUrlBlur",value:function(){var e=this;!_.isEmpty(this.props.blueprintUrl)&&Stage.Utils.isUrl(this.props.blueprintUrl)?(this.setState({loading:!0},function(){return e.props.onChange({blueprintFile:null})}),this.blueprintFileRef.current&&this.blueprintFileRef.current.reset(),this.actions.doListYamlFiles(this.props.blueprintUrl,null,!0).then(function(n){e.setState({yamlFiles:n,loading:!1},function(){var r=n.shift(),i=_.includes(n,t.DEFAULT_BLUEPRINT_YAML_FILE)?t.DEFAULT_BLUEPRINT_YAML_FILE:n[0];e.props.onChange(o()({},t.NO_ERRORS,{blueprintName:r,blueprintFileName:i}))})}).catch(function(t){e.setState({loading:!1},function(){return e.props.onChange({errors:{error:t.message},blueprintName:"",blueprintFileName:""})})})):this.setState({yamlFiles:[]},this.resetErrors)}},{key:"_onBlueprintUrlFocus",value:function(){this.props.blueprintFile&&(this.blueprintFileRef.current&&this.blueprintFileRef.current.reset(),this._onBlueprintFileReset())}},{key:"_onBlueprintFileChange",value:function(e){var n=this;e?(this.setState({loading:!0}),this.actions.doListYamlFiles(null,e,!0).then(function(r){var i=r.shift(),a=_.includes(r,t.DEFAULT_BLUEPRINT_YAML_FILE)?t.DEFAULT_BLUEPRINT_YAML_FILE:r[0];n.setState({yamlFiles:r,loading:!1},function(){n.props.onChange(o()({},t.NO_ERRORS,{blueprintFile:e,blueprintUrl:e.name,blueprintName:i,blueprintFileName:a}))})}).catch(function(e){n.setState({loading:!1},function(){return n.props.onChange({errors:{error:e.message},blueprintName:"",blueprintFileName:""})})})):this.setState({yamlFiles:[]},this.resetErrors)}},{key:"_onBlueprintFileReset",value:function(){var e=this;this.setState({yamlFiles:[]},function(){return e.props.onChange(o()({},t.NO_ERRORS,{blueprintFile:null,blueprintUrl:"",blueprintName:"",blueprintFileName:""}))})}},{key:"_onBlueprintImageUrlFocus",value:function(){this.props.imageFile&&(this.imageFileRef.current&&this.imageFileRef.current.reset(),this._onBlueprintImageReset())}},{key:"_onBlueprintImageChange",value:function(e){e&&this.props.onChange(o()({},t.NO_ERRORS,{imageUrl:e.name,imageFile:e}))}},{key:"_onBlueprintImageReset",value:function(){this.props.onChange(o()({},t.NO_ERRORS,{imageUrl:"",imageFile:null}))}},{key:"resetErrors",value:function(){this.props.onChange(t.NO_ERRORS)}},{key:"render",value:function(){var e=Stage.Basic,t=e.Form,n=e.Label,r=_.map(this.state.yamlFiles,function(e){return{text:e,value:e}});return y.a.createElement(t,{loading:this.state.loading||this.props.loading,errors:this.props.showErrorsSummary?this.props.errors:null,onErrorsDismiss:this.resetErrors.bind(this)},y.a.createElement(t.Field,{label:"Blueprint package",required:!0,error:this.props.errors.blueprintUrl,help:"You can provide single YAML file or blueprint archive. Supported types are: yml, yaml, zip, tar, tar.gz and tar.bz2. The archive package must contain exactly one directory that includes at least one YAML file."},y.a.createElement(t.UrlOrFile,{name:"blueprint",value:this.props.blueprintUrl,placeholder:"Provide the blueprint's URL or click browse to select a file",onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onBlueprintUrlFocus.bind(this),onBlurUrl:this._onBlueprintUrlBlur.bind(this),onChangeFile:this._onBlueprintFileChange.bind(this),onResetFile:this._onBlueprintFileReset.bind(this),label:y.a.createElement(n,null,this.props.blueprintFile?"File":"URL"),fileInputRef:this.blueprintFileRef})),y.a.createElement(t.Field,{label:"Blueprint name",required:!0,error:this.props.errors.blueprintName,help:"The package is uploaded to the Manager as a blueprint with the name you specify here."},y.a.createElement(t.Input,{name:"blueprintName",value:this.props.blueprintName,onChange:this._handleInputChange.bind(this)})),y.a.createElement(t.Field,{label:"Blueprint YAML file",required:!0,error:this.props.errors.blueprintFileName,help:"If you choose archive as blueprint package, you must specify the blueprint YAML file for your environment, because the archive can contain more than one YAML file."},y.a.createElement(t.Dropdown,{name:"blueprintFileName",search:!0,selection:!0,options:r,value:this.props.blueprintFileName,onChange:this._handleInputChange.bind(this)})),y.a.createElement(t.Field,{label:"Blueprint icon",error:this.props.errors.imageUrl,help:"(Optional) The blueprint icon file is shown with the blueprint in the local blueprint widget."},y.a.createElement(t.UrlOrFile,{name:"image",value:this.props.imageUrl,placeholder:"Provide the image file URL or click browse to select a file",onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onBlueprintImageUrlFocus.bind(this),onBlurUrl:_.noop,onChangeFile:this._onBlueprintImageChange.bind(this),onResetFile:this._onBlueprintImageReset.bind(this),label:y.a.createElement(n,null,this.props.imageFile?"File":"URL"),fileInputRef:this.imageFileRef})))}}]),t}(y.a.Component);b.propTypes={blueprintUrl:g.a.string,blueprintFile:g.a.object,blueprintName:g.a.string,blueprintFileName:g.a.string,imageUrl:g.a.string,imageFile:g.a.object,errors:g.a.object,loading:g.a.bool,showErrorsSummary:g.a.bool,onChange:g.a.func.isRequired,toolbox:g.a.object.isRequired},b.defaultProps={blueprintUrl:"",blueprintFile:null,blueprintName:"",blueprintFileName:"",imageUrl:"",imageFile:null,errors:{},loading:!1,showErrorsSummary:!0},b.initialState={loading:!1,yamlFiles:[]},b.DEFAULT_BLUEPRINT_YAML_FILE="blueprint.yaml",b.NO_ERRORS={errors:{}},Stage.defineCommon({name:"UploadBlueprintForm",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=n(1),g=n.n(m),v=function(e){function t(e){a()(this,t);var n=c()(this,(t.__proto__||o()(t)).call(this,e));return n.state=t.initialState,n.actions=new Stage.Common.BlueprintActions(e.toolbox),n}return f()(t,e),s()(t,[{key:"componentDidUpdate",value:function(e){e.open&&!this.props.open&&this.setState(t.initialState)}},{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(this.props.open,e.open)||!_.isEqual(this.state,t)}},{key:"uploadBlueprint",value:function(){var e=this,t=this.state.blueprintFile?"":this.state.blueprintUrl,n=this.state.imageFile?"":this.state.imageUrl,r={};if(this.state.blueprintFile||(_.isEmpty(t)?r.blueprintUrl="Please select blueprint package":Stage.Utils.isUrl(t)||(r.blueprintUrl="Please provide valid URL for blueprint package")),_.isEmpty(this.state.blueprintName)&&(r.blueprintName="Please provide blueprint name"),_.isEmpty(this.state.blueprintFileName)&&(r.blueprintFileName="Please provide blueprint YAML file"),_.isEmpty(n)||Stage.Utils.isUrl(t)||(r.imageUrl="Please provide valid URL for blueprint icon"),!_.isEmpty(r))return this.setState({errors:r}),!1;this.setState({loading:!0}),this.actions.doUpload(this.state.blueprintName,this.state.blueprintFileName,t,this.state.blueprintFile,n,this.state.imageFile,this.state.visibility).then(function(){e.setState({errors:{},loading:!1},e.props.onHide),e.props.toolbox.refresh()}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"onFormFieldChange",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,r=t.CancelButton,o=t.Icon,i=t.Modal,a=t.VisibilityField,l=Stage.Common.UploadBlueprintForm;return g.a.createElement("div",null,g.a.createElement(i,{open:this.props.open,onClose:this.props.onHide,className:"uploadBlueprintModal"},g.a.createElement(i.Header,null,g.a.createElement(o,{name:"upload"})," Upload blueprint",g.a.createElement(a,{visibility:this.state.visibility,className:"rightFloated",onVisibilityChange:function(t){return e.setState({visibility:t})}})),g.a.createElement(i.Content,null,g.a.createElement(l,{blueprintUrl:this.state.blueprintUrl,blueprintFile:this.state.blueprintFile,blueprintName:this.state.blueprintName,blueprintFileName:this.state.blueprintFileName,imageUrl:this.state.imageUrl,imageFile:this.state.imageFile,errors:this.state.errors,loading:this.state.loading,onChange:this.onFormFieldChange.bind(this),toolbox:this.props.toolbox})),g.a.createElement(i.Actions,null,g.a.createElement(r,{onClick:this.props.onHide,disabled:this.state.loading}),g.a.createElement(n,{onClick:this.uploadBlueprint.bind(this),disabled:this.state.loading,content:"Upload",icon:"upload",color:"green"}))))}}]),t}(g.a.Component);v.propTypes={open:h.a.bool.isRequired,onHide:h.a.func.isRequired,toolbox:h.a.object.isRequired},v.initialState={loading:!1,visibility:Stage.Common.Consts.defaultVisibility,blueprintUrl:"",blueprintFile:null,blueprintName:"",blueprintFileName:"",imageUrl:"",imageFile:null,errors:{}},Stage.defineCommon({name:"UploadBlueprintModal",common:v})},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(1),g=n.n(m),v=n(0),y=n.n(v),b=function(e){function t(e){s()(this,t);var n=f()(this,(t.__proto__||a()(t)).call(this,e));return n.wagonFileRef=g.a.createRef(),n.yamlFileRef=g.a.createRef(),n}return h()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.wagonFileRef.current&&this.wagonFileRef.current.reset(),this.yamlFileRef.current&&this.yamlFileRef.current.reset(),this.resetErrors()}},{key:"resetErrors",value:function(){this.props.onChange(t.NO_ERRORS)}},{key:"_handleInputChange",value:function(e,n){this.props.onChange(o()({},t.NO_ERRORS,Stage.Basic.Form.fieldNameValue(n)))}},{key:"_onWagonUrlFocus",value:function(){this.props.wagonFile&&(this.wagonFileRef.current&&this.wagonFileRef.current.reset(),this._onWagonFileReset())}},{key:"_onWagonFileChange",value:function(e){this.props.onChange(o()({},t.NO_ERRORS,{wagonFile:e||null,wagonUrl:e?e.name:""}))}},{key:"_onWagonFileReset",value:function(){this.props.onChange(o()({},t.NO_ERRORS,{wagonFile:null,wagonUrl:""}))}},{key:"_onYamlUrlFocus",value:function(){this.props.yamlFile&&(this.yamlFileRef.current&&this.yamlFileRef.current.reset(),this._onYamlFileReset())}},{key:"_onYamlFileChange",value:function(e){this.props.onChange(o()({},t.NO_ERRORS,{yamlFile:e||null,yamlUrl:e?e.name:""}))}},{key:"_onYamlFileReset",value:function(){this.props.onChange(o()({},t.NO_ERRORS,{yamlFile:null,yamlUrl:""}))}},{key:"render",value:function(){var e=Stage.Basic,t=e.Container,n=e.Form,r=e.Label,o=[g.a.createElement(n.Field,{label:"Wagon file",required:this.props.addRequiredMarks,key:"wagon",error:this.props.errors.wagonUrl},g.a.createElement(n.UrlOrFile,{name:"wagon",value:this.props.wagonUrl,placeholder:this.props.wagonPlaceholder,onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onWagonUrlFocus.bind(this),onBlurUrl:_.noop,onChangeFile:this._onWagonFileChange.bind(this),onResetFile:this._onWagonFileReset.bind(this),label:g.a.createElement(r,null,this.props.wagonFile?"File":"URL"),fileInputRef:this.wagonFileRef})),g.a.createElement(n.Field,{label:"YAML file",required:this.props.addRequiredMarks,key:"yaml",error:this.props.errors.yamlUrl},g.a.createElement(n.UrlOrFile,{name:"yaml",value:this.props.yamlUrl,placeholder:this.props.yamlPlaceholder,onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onYamlUrlFocus.bind(this),onBlurUrl:_.noop,onChangeFile:this._onYamlFileChange.bind(this),onResetFile:this._onYamlFileReset.bind(this),label:g.a.createElement(r,null,this.props.yamlFile?"File":"URL"),fileInputRef:this.yamlFileRef}))];return this.props.wrapInForm?g.a.createElement(n,{errors:this.props.errors,onErrorsDismiss:this.resetErrors.bind(this),loading:this.props.loading},o):g.a.createElement(t,{fluid:!0},o)}}]),t}(g.a.Component);b.propTypes={wagonUrl:y.a.string,wagonFile:y.a.object,wagonPlaceholder:y.a.string,yamlUrl:y.a.string,yamlFile:y.a.object,yamlPlaceholder:y.a.string,errors:y.a.object,loading:y.a.bool,onChange:y.a.func.isRequired,wrapInForm:y.a.bool,addRequiredMarks:y.a.bool},b.defaultProps={wagonUrl:"",wagonFile:null,wagonPlaceholder:"Provide the plugin's wagon file URL or click browse to select a file",yamlUrl:"",yamlFile:null,yamlPlaceholder:"Provide the plugin's YAML file URL or click browse to select a file",errors:{},loading:!1,wrapInForm:!0,addRequiredMarks:!0},b.NO_ERRORS={errors:{}},Stage.defineCommon({name:"UploadPluginForm",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=n(1),y=n.n(v),b=function(e){function t(e){s()(this,t);var n=f()(this,(t.__proto__||a()(t)).call(this,e));return n.state=o()({},t.initialState),n}return h()(t,e),c()(t,[{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.setState(t.initialState)}},{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(this.props.open,e.open)||!_.isEqual(this.state,t)}},{key:"uploadPlugin",value:function(){var e=this,t=this.state.wagonFile?"":this.state.wagonUrl,n=this.state.yamlFile?"":this.state.yamlUrl,r={};if(this.state.wagonFile||(_.isEmpty(t)?r.wagonUrl="Please select wagon file or provide URL to wagon file":Stage.Utils.isUrl(t)||(r.wagonUrl="Please provide valid URL for wagon file")),this.state.yamlFile||(_.isEmpty(n)?r.yamlUrl="Please select YAML file or provide URL to YAML file":Stage.Utils.isUrl(n)||(r.yamlUrl="Please provide valid URL for YAML file")),!_.isEmpty(r))return this.setState({errors:r}),!1;this.setState({loading:!0}),new Stage.Common.PluginActions(this.props.toolbox).doUpload(this.state.visibility,t,n,this.state.wagonFile,this.state.yamlFile).then(function(){e.setState({errors:{},loading:!1},e.props.onHide),e.props.toolbox.refresh()}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"onFormFieldChange",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,r=t.CancelButton,o=t.Icon,i=t.Modal,a=t.VisibilityField,l=Stage.Common.UploadPluginForm;return y.a.createElement(i,{open:this.props.open,onClose:this.props.onHide},y.a.createElement(i.Header,null,y.a.createElement(o,{name:"upload"})," Upload plugin",y.a.createElement(a,{visibility:this.state.visibility,className:"rightFloated",onVisibilityChange:function(t){return e.setState({visibility:t})}})),y.a.createElement(i.Content,null,y.a.createElement(l,{wagonUrl:this.state.wagonUrl,wagonFile:this.state.wagonFile,yamlUrl:this.state.yamlUrl,yamlFile:this.state.yamlFile,errors:this.state.errors,loading:this.state.loading,onChange:this.onFormFieldChange.bind(this)})),y.a.createElement(i.Actions,null,y.a.createElement(r,{onClick:this.props.onHide,disabled:this.state.loading}),y.a.createElement(n,{onClick:this.uploadPlugin.bind(this),disabled:this.state.loading,content:"Upload",icon:"upload",color:"green"})))}}]),t}(y.a.Component);b.propTypes={open:g.a.bool.isRequired,onHide:g.a.func.isRequired,toolbox:g.a.object.isRequired},b.initialState={loading:!1,wagonUrl:"",wagonFile:null,yamlUrl:"",yamlFile:null,errors:{},visibility:Stage.Common.Consts.defaultVisibility},Stage.defineCommon({name:"UploadPluginModal",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"render",value:function(){var e=Stage.Basic.Form;return React.createElement(e.File,{name:"yamlFile",showInput:!1,showReset:!1,openButtonParams:{className:"rightFloated",content:"Load Values",labelPosition:"left"},onChange:this.props.onChange,help:"You can provide YAML file with "+this.props.dataType+" to automatically fill in the form.",loading:this.props.fileLoading,disabled:this.props.fileLoading})}}]),t}(React.Component);m.propTypes={dataType:h.a.string,fileLoading:h.a.bool,onChange:h.a.func},m.defaultProps={dataType:"values",fileLoading:!1,onChange:_.noop},Stage.defineCommon({name:"YamlFileButton",common:m})}]);
\ No newline at end of file
+*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var u in n=Object(arguments[s]))o.call(n,u)&&(l[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)i.call(n,a[c])&&(l[a[c]]=n[a[c]])}}return l}},function(e,t,n){"use strict";n.r(t);var r=n(49),o=n.n(r),i=n(20),a=n.n(i),l=n(74),s=n.n(l),u=n(2),c=n.n(u),p=n(3),f=n.n(p),d=function(){function e(t){c()(this,e),this.toolbox=t}return f()(e,[{key:"doGetExecutions",value:function(e){return this.toolbox.getManager().doGet("/executions?_include=id,status,ended_at",{deployment_id:e})}},{key:"doGetStatus",value:function(e){return this.toolbox.getManager().doGet("/executions?_include=id,status",{id:e})}},{key:"doAct",value:function(e,t){return this.toolbox.getManager().doPost("/executions/"+e.id,null,{deployment_id:e.deployment_id,action:t})}},{key:"waitUntilFinished",value:function(){var e=s()(o.a.mark(function e(t,n){var r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doGetStatus(t);case 2:if(r=e.sent,i=_.filter(r.items,Stage.Common.ExecutionUtils.isActiveExecution),_.isEmpty(i)){e.next=10;break}return e.next=7,new a.a(function(e){return setTimeout(e,n)});case 7:return e.next=9,this.waitUntilFinished(t,n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}();Stage.defineCommon({name:"ExecutionActions",common:d})},function(e,t,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(138),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",u="object"==typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=b;var p="suspendedStart",f="suspendedYield",d="executing",h="completed",m={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==r&&o.call(y,a)&&(g=y);var _=R.prototype=w.prototype=Object.create(g);S.prototype=_.constructor=R,R.constructor=S,R[s]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,R):(e.__proto__=R,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(_),e},c.awrap=function(e){return{__await:e}},C(x.prototype),x.prototype[l]=function(){return this},c.AsyncIterator=x,c.async=function(e,t,n,r){var o=new x(b(e,t,n,r));return c.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},C(_),_[s]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(U),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return l.type="throw",l.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),U(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;U(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function b(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new T(r||[]);return i._invoke=function(e,t,n){var r=p;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=k(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=E(e,t,n);if("normal"===s.type){if(r=n.done?h:f,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function S(){}function R(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(e){var t;this._invoke=function(n,r){function i(){return new Promise(function(t,i){!function t(n,r,i,a){var l=E(e[n],e,r);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&o.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(u).then(function(e){s.value=e,i(s)},a)}a(l.arg)}(n,r,t,i)})}return t=t?t.then(i,i):i()}}function k(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,k(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=E(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=function(e){function t(e,n){return s()(this,t),f()(this,(t.__proto__||a()(t)).call(this,e,n))}return h()(t,e),c()(t,[{key:"render",value:function(){var e=Stage.Basic,t=e.Icon,n=e.Label,r=e.Popup,i=Stage.Common.ExecutionUtils,a=this.props.item,l=a.status_display||a.status,s=this.props.allowShowingPopup&&i.isWaitingExecution(a)&&!_.isEmpty(a.scheduled_for);return this.props.showLabel?React.createElement(r,{on:s?"hover":[]},React.createElement(r.Trigger,null,React.createElement(n,o()({},this.props.labelProps,{onClick:function(e){return e.stopPropagation()}}),React.createElement(t,o()({},i.getExecutionStatusIconParams(a),this.props.iconProps)),this.props.showWorkflowId&&a.workflow_id,this.props.showWorkflowId&&" ",l)),s?React.createElement("span",null,"Scheduled for: ",React.createElement("strong",null,a.scheduled_for)):null):React.createElement(t,o()({},i.getExecutionStatusIconParams(a),this.props.iconProps,{onClick:function(e){return e.stopPropagation()}}))}}]),t}(React.Component);v.propTypes={item:g.a.object.isRequired,labelProps:g.a.object,iconProps:g.a.object,allowShowingPopup:g.a.bool,showLabel:g.a.bool,showWorkflowId:g.a.bool},v.defaultProps={labelProps:{},iconProps:{},allowShowingPopup:!0,showLabel:!0,showWorkflowId:!1},Stage.defineCommon({name:"ExecutionStatus",common:v})},function(e,t,n){"use strict";n.r(t);var r,o=n(23),i=n.n(o),a=n(24),l=n.n(a),s=n(2),u=n.n(s),c=n(3),p=n.n(c),f=function(){function e(){u()(this,e)}return p()(e,null,[{key:"isCancelledExecution",value:function(e){return"cancelled"===e.status}},{key:"isWaitingExecution",value:function(t){return _.includes(e.WAITING_EXECUTION_STATUSES,t.status)}},{key:"isFailedExecution",value:function(e){return"failed"===e.status}},{key:"isSuccessfulExecution",value:function(e){return"terminated"===e.status}},{key:"isUpdateExecution",value:function(e){return"update"===e.workflow_id}},{key:"isActiveExecution",value:function(t){return _.includes(e.ACTIVE_EXECUTION_STATUSES,t.status)}},{key:"getExecutionStatusGroup",value:function(t){return e.isFailedExecution(t)?e.EXECUTION_FAILED:e.isSuccessfulExecution(t)?e.EXECUTION_SUCCESSFUL:e.isCancelledExecution(t)?e.EXECUTION_CANCELLED:e.isWaitingExecution(t)?e.EXECUTION_WAITING:e.EXECUTION_IN_PROGRESS}},{key:"getExecutionStatusIconParams",value:function(t){return e.STATUS_ICON_PARAMS[e.getExecutionStatusGroup(t)]}}]),e}();f.FORCE_RESUME_ACTION="force-resume",f.RESUME_ACTION="resume",f.CANCEL_ACTION="cancel",f.FORCE_CANCEL_ACTION="force-cancel",f.KILL_CANCEL_ACTION="kill",f.EXECUTION_SUCCESSFUL="success",f.EXECUTION_FAILED="failed",f.EXECUTION_CANCELLED="cancelled",f.EXECUTION_WAITING="waiting",f.EXECUTION_IN_PROGRESS="inprogress",f.STATUS_ICON_PARAMS=(r={},l()(r,f.EXECUTION_SUCCESSFUL,{name:"checkmark",color:"green",loading:!1}),l()(r,f.EXECUTION_FAILED,{name:"remove",color:"red",loading:!1}),l()(r,f.EXECUTION_CANCELLED,{name:"ban",color:"orange",loading:!1}),l()(r,f.EXECUTION_WAITING,{name:"clock",color:"black",loading:!1}),l()(r,f.EXECUTION_IN_PROGRESS,{name:"spinner",color:"yellow",loading:!0}),r),f.EXECUTION_STATUSES=["terminated","failed","cancelled","scheduled","queued","pending","started","cancelling","force_cancelling","kill_cancelling"],f.WAITING_EXECUTION_STATUSES=["scheduled","queued"],f.END_EXECUTION_STATUSES=["terminated","failed","cancelled"],f.ACTIVE_EXECUTION_STATUSES=_.difference(f.EXECUTION_STATUSES,[].concat(i()(f.END_EXECUTION_STATUSES),i()(f.WAITING_EXECUTION_STATUSES))),Stage.defineCommon({name:"ExecutionUtils",common:f})},function(e,t,n){e.exports={default:n(142),__esModule:!0}},function(e,t,n){n(35),n(143),e.exports=n(8).Array.from},function(e,t,n){"use strict";var r=n(21),o=n(11),i=n(29),a=n(62),l=n(63),s=n(41),u=n(144),c=n(64);o(o.S+o.F*!n(69)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,p,f=i(e),d="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,v=0,y=c(f);if(g&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==y||d==Array&&l(y))for(n=new d(t=s(f.length));t>v;v++)u(n,v,g?m(f[v],v):f[v]);else for(p=y.call(f),n=new d;!(o=p.next()).done;v++)u(n,v,g?a(p,m,[o.value,v],!0):o.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(13),o=n(26);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doGetTextFileContent",value:function(e){return this.toolbox.getInternal().doUpload("/file/text",null,{file:e},"post",!1)}},{key:"doGetYamlFileContent",value:function(e){return this.toolbox.getInternal().doUpload("/file/yaml",null,{file:e},"post")}}]),e}();Stage.defineCommon({name:"FileActions",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"render",value:function(){var e=Stage.Basic,t=e.CopyToClipboardButton,n=e.Label,r=e.Popup;return React.createElement(r,{wide:!0,hoverable:!0,position:"right center"},React.createElement(r.Trigger,null,React.createElement(n,{style:{opacity:this.props.selected?"1":"0.2"}},this.props.label)),React.createElement(r.Content,null,React.createElement("div",{className:"noWrap"},React.createElement(t,{content:"Copy "+this.props.label,text:this.props.id}),"  ",React.createElement("strong",null,this.props.id))))}}]),t}(React.Component);m.propTypes={label:h.a.string,id:h.a.string,selected:h.a.bool},m.defaultProps={label:"ID",id:"",selected:!0},Stage.defineCommon({name:"IdPopup",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doGetMetric",value:function(e,t,n,r,o,i,a){var l={};return _.isEmpty(o)||(l.from=o),_.isEmpty(i)||(l.to=i),_.isEmpty(a)||(l.timeGroup=a),this.toolbox.getInternal().doGet("/monitor/byMetric/"+(e||"*")+"/"+(t||"*")+"/"+(n||"*")+"/"+(r||"*"),l)}},{key:"doGetMetrics",value:function(e,t,n){return this.toolbox.getInternal().doGet("/monitor/metrics/"+(e||"*")+"/"+(t||"*")+"/"+(n||"*"))}},{key:"doRunQuery",value:function(e,t,n){return this.toolbox.getInternal().doGet("/monitor/query",{qSelect:e,qFrom:t,qWhere:n})}}]),e}();Stage.defineCommon({name:"InfluxActions",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"shouldComponentUpdate",value:function(e){return!_.isEqual(this.props,e)}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Form,r=t.Header,o=t.List,i=t.PopupHelp,a=function(){return React.createElement(r,{size:"tiny"},e.props.header,React.createElement(r.Subheader,null,"See values typing details: ",React.createElement(i,{flowing:!0,header:"Value type",content:React.createElement("div",null,"Values are casted to types, e.g.:",React.createElement(o,{bulleted:!0},React.createElement(o.Item,null,React.createElement("strong",null,"[1, 2]")," will be casted to an array"),React.createElement(o.Item,null,React.createElement("strong",null,"524")," will be casted to a number")),"Surround value with ",React.createElement("strong",null,'"')," to explicitly declare it as a string, e.g.:",React.createElement(o,{bulleted:!0},React.createElement(o.Item,null,React.createElement("strong",null,'"{"a":"b"}"')," will be send as string not an object"),React.createElement(o.Item,null,React.createElement("strong",null,'"true"')," will be send as string not a boolean value")),"Use ",React.createElement("strong",null,'""')," for an empty string.")})))};return this.props.dividing?React.createElement(n.Divider,{style:this.props.compact?{marginTop:0}:{}},React.createElement(a,null)):React.createElement(a,null)}}]),t}(React.Component);m.propTypes={compact:h.a.bool,dividing:h.a.bool,header:h.a.string},m.defaultProps={compact:!1,dividing:!0,header:"Deployment inputs"},Stage.defineCommon({name:"InputsHeader",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=function(){function e(){a()(this,e)}return s()(e,null,[{key:"getEnhancedStringValue",value:function(t){var n=Stage.Common.JsonUtils,r=n.getStringValue(t);if(""===r)return e.EMPTY_STRING;var o=n.toType(t),i=n.getTypedValue(r);return o!==n.toType(i)&&(r='"'+r+'"'),r}},{key:"getInputFieldInitialValue",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(_.isNil(t))switch(n){case"boolean":return e.DEFAULT_VALUE_BOOLEAN;case"integer":return e.DEFAULT_VALUE_NUMBER;case"string":default:return e.DEFAULT_VALUE_STRING}else switch(n){case"boolean":case"integer":return t;case"string":default:return e.getEnhancedStringValue(t)}}},{key:"getRevertToDefaultIcon",value:function(t,n,r,o){var i=Stage.Basic.RevertToDefaultIcon,a=Stage.Common.JsonUtils,l=a.getStringValue(n),s=_.startsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.endsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.size(l)>1?l.slice(1,-1):a.getTypedValue(n),u=r,c=e.getInputFieldInitialValue(r,a.toCloudifyType(u));return _.isNil(u)?void 0:React.createElement(i,{value:s,defaultValue:u,onClick:function(){return o(null,{name:t,value:c})}})}},{key:"getFormInputField",value:function(t,n,r,o,i,a,l){var s=Stage.Basic.Form;switch(l){case"boolean":return React.createElement(s.Field,{key:t,help:o,required:_.isNil(r)},e.getInputField(t,n,r,i,a,l));case"integer":return React.createElement(s.Field,{key:t,error:a,help:o,required:_.isNil(r),label:t},e.getInputField(t,n,r,i,a,l));case"string":default:return React.createElement(s.Field,{key:t,error:a,help:o,required:_.isNil(r),label:t},e.getInputField(t,n,r,i,a,l))}}},{key:"getInputField",value:function(t,n,r,o,i,a){var l=Stage.Basic.Form;switch(a){case"boolean":return React.createElement(React.Fragment,null,React.createElement(l.Checkbox,{name:t,toggle:!0,label:t,checked:n,onChange:o}),"   ",e.getRevertToDefaultIcon(t,n,r,o));case"integer":return React.createElement(l.Input,{name:t,value:n,fluid:!0,error:!!i,type:"number",icon:e.getRevertToDefaultIcon(t,n,r,o),onChange:o});case"string":default:return _.includes(n,"\n")?React.createElement(l.Group,null,React.createElement(l.Field,{width:15},React.createElement(l.TextArea,{name:t,value:n,onChange:o})),React.createElement(l.Field,{width:1,style:{textAlign:"center"}},e.getRevertToDefaultIcon(t,n,r,o))):React.createElement(l.Input,{name:t,value:n,fluid:!0,error:!!i,icon:e.getRevertToDefaultIcon(t,n,r,o),onChange:o})}}},{key:"getInputFields",value:function(t,n,r,i){var a=_.sortBy(_.map(t,function(e,t){return o()({name:t},e)}),[function(e){return!_.isNil(e.default)},"name"]);return _.map(a,function(t){return e.getFormInputField(t.name,r[t.name],t.default,t.description,n,i[t.name],t.type)})}},{key:"getInputsInitialValuesFrom",value:function(t){var n={};return _.forEach(t,function(t,r){n[r]=e.getInputFieldInitialValue(t.default,t.type)}),n}},{key:"validateInputTypes",value:function(e,t){var n=[],r=!0;if(_.forEach(e,function(e,o){var i=e.type,a=t[o];if(!_.isUndefined(i)&&!_.isUndefined(a)){var l=Stage.Common.JsonUtils.toCloudifyType(a);"boolean"!==i&&"integer"!==i||i===l||(n.push(o),r=!1)}}),!r)throw new Error("The following fields have invalid types: "+_.join(n,", ")+".")}},{key:"getUpdatedInputs",value:function(t,n,r){var o={};return e.validateInputTypes(t,r),_.forEach(t,function(t,i){var a=r[i],l=n[i];_.isNil(a)?o[i]=l:o[i]=e.getInputFieldInitialValue(a,t.type)}),o}},{key:"getInputsToSend",value:function(t,n,r){var o=Stage.Common.JsonUtils,i={};return _.forEach(t,function(t,a){var l=o.getStringValue(n[a]),s=o.getTypedValue(l);_.isEmpty(l)&&_.isNil(t.default)?r[a]=!0:_.startsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.endsWith(l,e.STRING_VALUE_SURROUND_CHAR)&&_.size(l)>1&&(s=l.slice(1,-1)),_.isEqual(s,t.default)||(i[a]=s)}),i}},{key:"addErrors",value:function(e,t){_.forEach(_.keys(e),function(e){return t[e]="Please provide "+e})}}]),e}();u.DEFAULT_VALUE_STRING="",u.DEFAULT_VALUE_NUMBER=0,u.DEFAULT_VALUE_BOOLEAN=!1,u.STRING_VALUE_SURROUND_CHAR='"',u.EMPTY_STRING='""',Stage.defineCommon({name:"InputsUtils",common:u})},function(e,t,n){"use strict";n.r(t);var r=n(50),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=function(){function e(){a()(this,e)}return s()(e,null,[{key:"stringify",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&""===t)return"";var r=t;return"object"!==e.toType(t)&&"array"!==e.toType(t)||(r=o()(t,null,n?2:0)),_.trim(r,'"')}},{key:"stringToJson",value:function(e){try{return JSON.parse(e)}catch(t){return e}}},{key:"toType",value:function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}},{key:"toCloudifyType",value:function(t){var n=e.toType(t);switch(n){case"boolean":case"string":return n;case"number":return"integer";case"array":case"object":default:return}}},{key:"getStringValue",value:function(t){var n=null;switch(e.toType(t)){case"array":case"object":n=o()(t);break;case"boolean":case"string":case"number":default:n=String(t)}return n}},{key:"getTypedValue",value:function(t){if("string"===e.toType(t)){if("true"===t)return!0;if("false"===t)return!1;var n=Number(t);if(!isNaN(n))return n;var r=null;try{r=JSON.parse(t)}catch(e){return t}return r}return t}}]),e}();Stage.defineCommon({name:"JsonUtils",common:u})},function(e,t,n){var r=n(8),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=function(e){function t(e,n){s()(this,t);var r=f()(this,(t.__proto__||a()(t)).call(this,e,n));return r.state={errorModalOpen:!1,open:!1},r}return h()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.CancelButton,r=t.Button,i=t.CopyToClipboardButton,a=t.HighlightText,l=t.Icon,s=t.Table,u=t.Modal,c=t.Popup,p=Stage.Common,f=p.ExecutionStatus,d=p.ExecutionUtils,h=o()({workflow_id:"",status:""},this.props.execution),m=!!h.scheduled_for,g=m?5:4;return _.isEmpty(h.status)?null:React.createElement(React.Fragment,null,React.createElement(c,{wide:"very",on:"hover",hoverable:!0,open:this.state.open,onOpen:function(){return e.setState({open:!0})},onClose:function(){return e.setState({open:!1})},onClick:function(t){t.stopPropagation(),e.setState({open:!1})}},React.createElement(c.Trigger,null,React.createElement("div",{style:{display:"inline-block"}},React.createElement(f,{item:h,allowShowingPopup:!1,showLabel:this.props.showLabel,showWorkflowId:this.props.showLabel,labelProps:{attached:this.props.labelAttached?"top left":void 0},iconProps:{attached:this.props.showLabel?void 0:"top left",size:"large"}}))),React.createElement(c.Header,null,"Last Execution"),React.createElement(c.Content,null,React.createElement(s,{compact:!0,celled:!0},React.createElement(s.Header,null,React.createElement(s.Row,{textAlign:"center"},React.createElement(s.HeaderCell,null,"Workflow"),React.createElement(s.HeaderCell,null,"Status"),React.createElement(s.HeaderCell,null,"Created"),m&&React.createElement(s.HeaderCell,null,"Scheduled"),React.createElement(s.HeaderCell,null,"Ended"))),React.createElement(s.Body,null,React.createElement(s.Row,{textAlign:"center"},React.createElement(s.Cell,null,h.workflow_id),React.createElement(s.Cell,null,h.status_display||h.status),React.createElement(s.Cell,null,Stage.Utils.formatTimestamp(h.created_at)),m&&React.createElement(s.Cell,null,Stage.Utils.formatTimestamp(h.scheduled_for)),React.createElement(s.Cell,null,Stage.Utils.formatTimestamp(h.ended_at)))),React.createElement(s.Footer,{fullWidth:!0},React.createElement(s.Row,{textAlign:"center"},React.createElement(s.HeaderCell,{colSpan:g},d.isFailedExecution(h)&&React.createElement(r,{icon:!0,labelPosition:"left",color:"red",onClick:function(){return e.setState({errorModalOpen:!0})}},React.createElement(l,{name:"remove"}),"Show Error"),React.createElement(r,{icon:!0,labelPosition:"left",color:"grey",onClick:this.props.onShowLogs},React.createElement(l,{name:"file text"}),"Show Logs"),d.isUpdateExecution(h)&&React.createElement(r,{icon:!0,labelPosition:"left",color:"blue",onClick:function(){return e.props.onShowUpdateDetails(_.get(h,"parameters.update_id"))}},React.createElement(l,{name:"magnify"}),"Show Update Details"))),React.createElement(s.Row,{textAlign:"center"},React.createElement(s.HeaderCell,{colSpan:g},(d.isCancelledExecution(h)||d.isFailedExecution(h))&&React.createElement(r,{icon:!0,labelPosition:"left",color:"green",onClick:function(){return e.props.onActOnExecution(h,d.FORCE_RESUME_ACTION)}},React.createElement(l,{name:"play"}),"Resume"),(d.isActiveExecution(h)||d.isWaitingExecution(h))&&React.createElement(r,{icon:!0,labelPosition:"left",color:"yellow",onClick:function(){return e.props.onActOnExecution(h,d.CANCEL_ACTION)}},React.createElement(l,{name:"cancel"}),"Cancel"),(d.isActiveExecution(h)||d.isWaitingExecution(h))&&React.createElement(r,{icon:!0,labelPosition:"left",color:"orange",onClick:function(){return e.props.onActOnExecution(h,d.FORCE_CANCEL_ACTION)}},React.createElement(l,{name:"cancel"}),"Force Cancel"),React.createElement(r,{icon:!0,labelPosition:"left",color:"red",onClick:function(){return e.props.onActOnExecution(h,d.KILL_CANCEL_ACTION)}},React.createElement(l,{name:"stop"}),"Kill Cancel"))))))),d.isFailedExecution(h)&&React.createElement(u,{open:this.state.errorModalOpen,onClose:function(){return e.setState({errorModalOpen:!1})}},React.createElement(u.Header,null,"Error message from '",h.workflow_id,"' worfklow execution on '",h.deployment_id,"' deployment"),React.createElement(u.Content,null,React.createElement(a,null,h.error)),React.createElement(u.Actions,null,React.createElement(i,{content:"Copy Error",text:h.error}),React.createElement(n,{onClick:function(t){t.stopPropagation(),e.setState({errorModalOpen:!1})},content:"Close"}))))}}]),t}(React.Component);v.propTypes={execution:g.a.object,onShowLogs:g.a.func,onShowUpdateDetails:g.a.func,onActOnExecution:g.a.func,showLabel:g.a.bool,labelAttached:g.a.bool},v.defaultProps={execution:{workflow_id:"",status:""},onShowLogs:_.noop,onShowUpdateDetails:_.noop,onActOnExecution:_.noop,showLabel:!1,labelAttached:!0},t.default=v,Stage.defineCommon({name:"LastExecutionStatusIcon",common:v})},function(e,t){Stage.defineCommon({name:"NodeInstancesConsts",common:{groupStates:[{name:"uninitialized",icon:"cancel",colorSUI:"blue",colorHTML:"#2185d0",states:["uninitialized"]},{name:"in progress",icon:"spinner",colorSUI:"yellow",colorHTML:"#fbbd08",states:["initializing","creating","created","configuring","configured","starting","stopping","stopped","deleting"]},{name:"started",icon:"checkmark",colorSUI:"green",colorHTML:"#21ba45",states:["started"]},{name:"deleted",icon:"trash",colorSUI:"black",colorHTML:"#1b1c1d",states:["deleted"]}]}})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doDelete",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.toolbox.getManager().doDelete("/plugins/"+e.id,null,{force:t})}},{key:"doUpload",value:function(e,t,n,r,o){var i={visibility:e};_.isEmpty(t)||(i.wagonUrl=t),_.isEmpty(n)||(i.yamlUrl=n);var a={};return r&&(a.wagon_file=r),o&&(a.yaml_file=o),this.toolbox.getInternal().doUpload("/plugins/upload",i,_.isEmpty(a)?null:a,"post")}},{key:"doDownload",value:function(e){var t="/plugins/"+e.id+"/archive",n=e.package_name+"_"+e.package_version+".zip";return this.toolbox.getManager().doDownload(t,n)}},{key:"doSetVisibility",value:function(e,t){return this.toolbox.getManager().doPatch("/plugins/"+e+"/set-visibility",null,{visibility:t})}}]),e}();Stage.defineCommon({name:"PluginActions",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),i=n(4),a=n.n(i),l=n(5),s=n.n(l),u=n(2),c=n.n(u),p=n(3),f=n.n(p),d=n(6),h=n.n(d),m=n(7),g=n.n(m),v=function(e){function t(e,n){c()(this,t);var r=h()(this,(t.__proto__||s()(t)).call(this,e,n));return r.state=t.initialState,r}return g()(t,e),f()(t,[{key:"onApprove",value:function(){return this._submitRole(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.setState(a()({},t.initialState,{role:this.props.resource.role}))}},{key:"_submitRole",value:function(){var e=this,t={};if(_.isEmpty(this.state.role)&&(t.role="Please provide a role"),!_.isEmpty(t))return this.setState({errors:t}),!1;this.setState({loading:!0}),this.props.onSetRole(this.props.resource.name,this.state.role).then(function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.onHide()}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"_handleInputChange",value:function(e,t){this.setState(Stage.Basic.Form.fieldNameValue(t))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.Modal,r=t.Icon,i=t.Form,a=t.ApproveButton,l=t.CancelButton,s=o()({},{name:""},this.props.resource);return React.createElement(n,{open:this.props.open,onClose:function(){return e.props.onHide()},className:"roleModal"},React.createElement(n.Header,null,React.createElement(r,{name:"male"})," Set role for ",s.name),React.createElement(n.Content,null,React.createElement(i,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(i.Field,{error:this.state.errors.role},React.createElement(i.Dropdown,{selection:!0,name:"role",placeholder:"Role",options:this.props.roles,value:this.state.role,onChange:this._handleInputChange.bind(this)})))),React.createElement(n.Actions,null,React.createElement(l,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(a,{onClick:this.onApprove.bind(this),disabled:this.state.loading,icon:"male",color:"green"})))}}]),t}(React.Component);v.initialState={loading:!1,role:"",errors:{}},t.default=v,Stage.defineCommon({name:"RoleModal",common:v})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"_handleInputChange",value:function(e,t){this.props.onUpdate(t.name,t.value)}},{key:"render",value:function(){var e=this,t=Stage.Basic.Form,n=_.reverse(_.map(_.filter(this.props.toolbox.getManager()._data.roles,{type:"tenant_role"}),function(e){return{text:e.name,value:e.name}}));return React.createElement("span",null,_.map(this.props.resources,function(r,o){return React.createElement(t.Field,{key:o,label:"Choose a role for "+e.props.resourceName+" "+o+":"},React.createElement(t.Dropdown,{placeholder:"Choose a role",selection:!0,options:n,name:o,value:r,onChange:e._handleInputChange.bind(e)}))}))}}]),t}(React.Component);m.propTypes={onUpdate:h.a.func.isRequired,resources:h.a.object.isRequired,resourceName:h.a.string.isRequired,toolbox:h.a.object.isRequired},t.default=m,Stage.defineCommon({name:"RolesPicker",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"render",value:function(){var e="";return _.forEach(_.omit(this.props.groupRoles,this.props.directRole),function(t,n){e+=n+" ("+t.join(", ")+"), "}),e=e.slice(0,-2),_.isEmpty(this.props.groupRoles)?this.props.directRole&&React.createElement("span",null,this.props.directRole):_.has(this.props.groupRoles,this.props.directRole)?_.isEmpty(e)?React.createElement("span",null,this.props.directRole," (",this.props.groupRoles[this.props.directRole].join(", "),")"):React.createElement("span",null,this.props.directRole," (",this.props.groupRoles[this.props.directRole].join(", "),"), ",e):this.props.directRole?React.createElement("span",null,this.props.directRole,", ",e):React.createElement("span",null,e)}}]),t}(React.Component);m.propTypes={groupRoles:h.a.object,directRole:h.a.string},t.default=m,Stage.defineCommon({name:"RolesPresenter",common:m})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(){o()(this,e)}return a()(e,null,[{key:"getTenantRoles",value:function(e){return _.filter(e,{type:"tenant_role"})}},{key:"getDefaultRoleName",value:function(e){return _.reverse(this.getTenantRoles(e))[0].name}},{key:"getSystemRole",value:function(e){return e?Stage.Common.Consts.sysAdminRole:Stage.Common.Consts.defaultUserRole}}]),e}();Stage.defineCommon({name:"RolesUtil",common:l})},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(3),a=n.n(i),l=function(){function e(t){o()(this,e),this.toolbox=t}return a()(e,[{key:"doGet",value:function(e){return this.toolbox.getManager().doGet("/secrets/"+e)}},{key:"doDelete",value:function(e){return this.toolbox.getManager().doDelete("/secrets/"+e)}},{key:"doCreate",value:function(e,t,n,r){return this.toolbox.getManager().doPut("/secrets/"+e,null,{value:t,visibility:n,is_hidden_value:r})}},{key:"doUpdate",value:function(e,t){return this.toolbox.getManager().doPatch("/secrets/"+e,null,{value:t})}},{key:"doSetIsHiddenValue",value:function(e,t){return this.toolbox.getManager().doPatch("/secrets/"+e,null,{is_hidden_value:t})}},{key:"doSetVisibility",value:function(e,t){return this.toolbox.getManager().doPatch("/secrets/"+e+"/set-visibility",null,{visibility:t})}}]),e}();Stage.defineCommon({name:"SecretActions",common:l})},function(e,t){Stage.defineCommon({name:"TimeConsts",common:{MAX_TIME_RESOLUTION_VALUE:1e3,MIN_TIME_RESOLUTION_VALUE:1,TIME_RESOLUTION_UNITS:[{name:"microseconds",text:"microseconds",value:"u"},{name:"milliseconds",text:"milliseconds",value:"ms"},{name:"seconds",text:"seconds",value:"s"},{name:"minutes",text:"minutes",value:"m"},{name:"hours",text:"hours",value:"h"},{name:"days",text:"days",value:"d"},{name:"weeks",text:"weeks",value:"w"}]}})},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),i=n(4),a=n.n(i),l=n(5),s=n.n(l),u=n(2),c=n.n(u),p=n(3),f=n.n(p),d=n(6),h=n.n(d),m=n(7),g=n.n(m),v=n(0),y=n.n(v),b=function(e){function t(e,n){c()(this,t);var r=h()(this,(t.__proto__||s()(t)).call(this,e,n));return r.state=t.initialState(e),r}return g()(t,e),f()(t,[{key:"componentDidUpdate",value:function(e){var n=this;!e.open&&this.props.open&&(this.setState({loading:!0}),new Stage.Common.BlueprintActions(this.props.toolbox).doGetBlueprints().then(function(e){n.setState(a()({},t.initialState(n.props),{blueprints:e}))}).catch(function(e){n.setState({loading:!1,error:e.message})}).then(function(){n._selectBlueprint({},{value:n.props.deployment.blueprint_id})}))}},{key:"onApprove",value:function(){return this._submitUpdate(),!1}},{key:"onCancel",value:function(){return this.props.onHide(),!0}},{key:"_submitUpdate",value:function(){var e=this,t=Stage.Common.InputsUtils,n={};_.isEmpty(this.state.blueprint.id)&&(n.blueprintName="Please select blueprint");var r={},o=Stage.Common.InputsUtils.getInputsToSend(this.state.blueprint.plan.inputs,this.state.deploymentInputs,r);if(t.addErrors(r,n),!_.isEmpty(n))return this.setState({errors:n}),!1;this.setState({loading:!0}),new Stage.Common.DeploymentActions(this.props.toolbox).doUpdate(this.props.deployment.id,this.state.blueprint.id,o,this.state.installWorkflow,this.state.uninstallWorkflow,this.state.installWorkflowFirst,this.state.ignoreFailure,this.state.automaticReinstall,this.state.reinstallList,this.state.force).then(function(){e.setState({errors:{},loading:!1}),e.props.toolbox.refresh(),e.props.onHide(),e.props.toolbox.getEventBus().trigger("nodes:refresh"),e.props.toolbox.getEventBus().trigger("inputs:refresh"),e.props.toolbox.getEventBus().trigger("outputs:refresh"),e.props.toolbox.getEventBus().trigger("executions:refresh")}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"_handleInputChange",value:function(e,t){var n=Stage.Basic.Form.fieldNameValue(t);this.setState(n)}},{key:"_handleDeploymentInputChange",value:function(e,t){var n=Stage.Basic.Form.fieldNameValue(t);this.setState({deploymentInputs:a()({},this.state.deploymentInputs,n)})}},{key:"_handleYamlFileChange",value:function(e){var t=this;if(e){var n=Stage.Common,r=n.FileActions,o=n.InputsUtils,i=new r(this.props.toolbox);this.setState({fileLoading:!0}),i.doGetYamlFileContent(e).then(function(e){var n=o.getUpdatedInputs(t.state.blueprint.plan.inputs,t.state.deploymentInputs,e);t.setState({errors:{},deploymentInputs:n,fileLoading:!1})}).catch(function(e){var n="Loading values from YAML file failed: "+(_.isString(e)?e:e.message);t.setState({errors:{yamlFile:n},fileLoading:!1})})}}},{key:"_selectBlueprint",value:function(e,t){var n=this;_.isEmpty(t.value)?this.setState({blueprint:Stage.Common.DeployBlueprintModal.EMPTY_BLUEPRINT,errors:{}}):(this.setState({loading:!0}),new Stage.Common.BlueprintActions(this.props.toolbox).doGetFullBlueprintData({id:t.value}).then(function(e){var t={},r=n.props.deployment.inputs;_.forEach(e.plan.inputs,function(e,n){t[n]=Stage.Common.InputsUtils.getInputFieldInitialValue(r[n],e.type)}),n.setState({deploymentInputs:t,blueprint:e,errors:{},loading:!1})}).catch(function(e){n.setState({blueprint:Stage.Common.DeployBlueprintModal.EMPTY_BLUEPRINT,loading:!1,errors:{error:e.message}})}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,r=t.CancelButton,i=t.Form,a=t.Header,l=t.Icon,s=t.Message,u=t.Modal,c=t.NodeInstancesFilter,p=Stage.Common,f=p.InputsHeader,d=p.InputsUtils,h=p.YamlFileButton,m=o()({},{items:[]},this.state.blueprints),g=_.map(m.items,function(e){return{text:e.id,value:e.id}});return React.createElement(u,{open:this.props.open,onClose:function(){return e.props.onHide()},className:"updateDeploymentModal"},React.createElement(u.Header,null,React.createElement(l,{name:"edit"})," Update deployment ",this.props.deployment.id),React.createElement(u.Content,null,React.createElement(i,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(i.Field,{error:this.state.errors.blueprintName,label:"Blueprint",required:!0},React.createElement(i.Dropdown,{search:!0,selection:!0,value:this.state.blueprint.id,placeholder:"Select Blueprint",name:"blueprintName",options:g,onChange:this._selectBlueprint.bind(this)})),this.state.blueprint.id&&React.createElement(React.Fragment,null,!_.isEmpty(this.state.blueprint.plan.inputs)&&React.createElement(h,{onChange:this._handleYamlFileChange.bind(this),dataType:"deployment's inputs",fileLoading:this.state.fileLoading}),React.createElement(f,null),_.isEmpty(this.state.blueprint.plan.inputs)&&React.createElement(s,{content:"No inputs available for the selected blueprint"})),d.getInputFields(this.state.blueprint.plan.inputs,this._handleDeploymentInputChange.bind(this),this.state.deploymentInputs,this.state.errors),React.createElement(i.Divider,null,React.createElement(a,{size:"tiny"},"Actions")),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run install workflow",toggle:!0,name:"installWorkflow",help:"Run install lifecycle operations",checked:this.state.installWorkflow,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run uninstall workflow",toggle:!0,name:"uninstallWorkflow",help:"Run uninstall lifecycle operations",checked:this.state.uninstallWorkflow,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run install workflow first",help:"Run install workflow first and then uninstall workflow. Default: first uninstall and then install",toggle:!0,name:"installWorkflowFirst",checked:this.state.installWorkflowFirst,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Ignore failures in uninstall workflow",toggle:!0,name:"ignoreFailure",help:"Supply the parameter `ignore_failure` with the value `true` to the uninstall workflow",checked:this.state.ignoreFailure,onChange:this._handleInputChange.bind(this)})),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Run automatic reinstall",name:"automaticReinstall",toggle:!0,help:'Automatically reinstall node instances that their properties has been modified, as part of a deployment update. If not set, then node instances that were explicitly given to "Reinstall node instances list" will still be reinstalled',checked:this.state.automaticReinstall,onChange:this._handleInputChange.bind(this)})),React.createElement(c,{name:"reinstallList",deploymentId:this.props.deployment.id,label:"Reinstall node instances list",value:this.state.reinstallList,placeholder:"Choose node instances to reinstall",upward:!0,onChange:this._handleInputChange.bind(this),help:'Node instances ids to be reinstalled as part of deployment update. They will be reinstalled even if "Run automatic reinstall" is not set'}),React.createElement(i.Field,null,React.createElement(i.Checkbox,{label:"Force update",name:"force",toggle:!0,help:"Force running update in case a previous update on this deployment has failed to finished successfully",checked:this.state.force,onChange:this._handleInputChange.bind(this)})))),React.createElement(u.Actions,null,React.createElement(r,{onClick:this.onCancel.bind(this),disabled:this.state.loading}),React.createElement(n,{onClick:this.onApprove.bind(this),disabled:this.state.loading,content:"Update",icon:"edit",color:"green"})))}}]),t}(React.Component);b.initialState=function(e){return{loading:!1,errors:{},blueprints:[],yamlFile:null,fileLoading:!1,blueprint:Stage.Common.DeployBlueprintModal.EMPTY_BLUEPRINT,deploymentInputs:a()({},e.deployment.inputs),installWorkflow:!0,uninstallWorkflow:!0,installWorkflowFirst:!1,ignoreFailure:!1,automaticReinstall:!0,reinstallList:[],force:!1}},b.propTypes={toolbox:y.a.object.isRequired,open:y.a.bool.isRequired,deployment:y.a.object.isRequired,onHide:y.a.func.isRequired},Stage.defineCommon({name:"UpdateDeploymentModal",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(23),o=n.n(r),i=n(51),a=n.n(i),l=n(4),s=n.n(l),u=n(5),c=n.n(u),p=n(2),f=n.n(p),d=n(3),h=n.n(d),m=n(6),g=n.n(m),v=n(7),y=n.n(v),b=n(0),E=n.n(b),w=n(75),S=function(e){function t(e,n){f()(this,t);var r=g()(this,(t.__proto__||c()(t)).call(this,e,n));return r.state=s()({},t.initialState),r}return y()(t,e),h()(t,[{key:"componentDidUpdate",value:function(e){var n=this;!e.open&&this.props.open?(this.setState({loading:!0}),new Stage.Common.DeploymentUpdatesActions(this.props.toolbox).doGetUpdate(this.props.deploymentUpdateId).then(function(e){n.setState({loading:!1,error:null,deploymentUpdate:e})}).catch(function(e){n.setState({loading:!1,error:e.message,deploymentUpdate:t.EMPTY_DEPLOYMENT_UPDATE})})):e.open&&!this.props.open&&this.setState(s()({},t.initialState))}},{key:"_getDiff",value:function(e,t){var n=Object(w.diffChars)(String(e),String(t));return React.createElement("div",null,_.map(n,function(e,t){var n=e.added?{color:"green"}:e.removed?{color:"red",textDecoration:"line-through"}:null;return React.createElement("span",{key:"part_"+t,style:n},e.value)}))}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.CancelButton,r=t.Form,i=t.Header,l=t.Icon,s=t.Modal,u=t.Table,c=t.Popup,p=t.ParameterValue,f=t.ParameterValueDescription,d=Stage.Common.JsonUtils,h=this.state.deploymentUpdate,m=a()(_.keys(h.old_inputs)),g=a()(_.keys(h.new_inputs)),v=_.uniq([].concat(o()(m),o()(g))),y=!_.isEqual(h.old_inputs,h.new_inputs),b=h.old_blueprint_id,E=h.new_blueprint_id,w=b!==E;return React.createElement("div",null,React.createElement(s,{open:this.props.open,onClose:function(){return e.props.onClose()},className:"updateDetailsModal"},React.createElement(s.Header,null,"Update details"),React.createElement(s.Content,null,React.createElement(r,{loading:this.state.loading,errors:this.state.errors,onErrorsDismiss:function(){return e.setState({errors:{}})}},React.createElement(i,{size:"tiny"},"Blueprint"),w?React.createElement("span",null,"Changed from ",React.createElement("strong",null,b)," into ",React.createElement("strong",null,E),"."):React.createElement("span",null,"Not changed."),React.createElement(i,{size:"tiny"},"Inputs",y&&React.createElement(i.Subheader,null,"To see difference between old and new inputs hover over ",React.createElement(l,{name:"asterisk",color:"red",size:"tiny",className:"superscripted"}))),y?React.createElement(u,null,React.createElement(u.Header,null,React.createElement(u.Row,null,React.createElement(u.HeaderCell,null),React.createElement(u.HeaderCell,null,"Old ",React.createElement(f,null)),React.createElement(u.HeaderCell,null,"New ",React.createElement(f,null)))),React.createElement(u.Body,null,_.map(v,function(t){var n=_.get(h.old_inputs,t,""),r=d.getStringValue(n),o=_.get(h.new_inputs,t,""),i=d.getStringValue(o),a=!_.isEqual(r,i);return React.createElement(u.Row,{key:t},React.createElement(u.Cell,null,t),React.createElement(u.Cell,null,React.createElement(p,{value:n,showCopyButton:!1})),React.createElement(u.Cell,null,React.createElement(p,{value:o,showCopyButton:!1}),a&&React.createElement(c,null,React.createElement(c.Trigger,null,React.createElement(l,{name:"asterisk",color:"red",size:"tiny",className:"superscripted"})),React.createElement(c.Content,null,e._getDiff(r,i)))))}))):React.createElement("span",null,"No inputs changed."))),React.createElement(s.Actions,null,React.createElement(n,{onClick:this.props.onClose,content:"Close"}))))}}]),t}(React.Component);S.initialState={loading:!1,error:null,deploymentUpdate:s()({},S.EMPTY_DEPLOYMENT_UPDATE)},S.EMPTY_DEPLOYMENT_UPDATE={old_inputs:{},new_inputs:{},old_blueprint_id:"",new_blueprint_id:""},S.propTypes={toolbox:E.a.object.isRequired,open:E.a.bool.isRequired,deploymentUpdateId:E.a.string},t.default=S,Stage.defineCommon({name:"UpdateDetailsModal",common:S})},function(e,t,n){n(164),e.exports=n(8).Array.sort},function(e,t,n){"use strict";var r=n(11),o=n(25),i=n(29),a=n(16),l=[].sort,s=[1,2,3];r(r.P+r.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n(165)(l)),"Array",{sort:function(e){return void 0===e?l.call(i(this)):l.call(i(this),o(e))}})},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=n(1),y=n.n(v),b=function(e){function t(e){s()(this,t);var n=f()(this,(t.__proto__||a()(t)).call(this,e));return n.state=t.initialState,n.blueprintFileRef=y.a.createRef(),n.imageFileRef=y.a.createRef(),n.actions=new Stage.Common.BlueprintActions(e.toolbox),n}return h()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this;this.blueprintFileRef.current&&this.blueprintFileRef.current.reset(),this.imageFileRef.current&&this.imageFileRef.current.reset(),this.setState(t.initialState),(!_.isEmpty(this.props.blueprintUrl)&&Stage.Utils.isUrl(this.props.blueprintUrl)||!_.isNil(this.props.blueprintFile))&&(this.setState({loading:!0}),this.actions.doListYamlFiles(this.props.blueprintUrl,this.props.blueprintFile,!1).then(function(t){e.setState({yamlFiles:t,loading:!1})}).catch(function(t){e.setState({yamlFiles:[],loading:!1}),e.props.onChange({errors:{error:t}})}))}},{key:"_handleInputChange",value:function(e,n){this.props.onChange(o()({},t.NO_ERRORS,Stage.Basic.Form.fieldNameValue(n)))}},{key:"_onBlueprintUrlBlur",value:function(){var e=this;!_.isEmpty(this.props.blueprintUrl)&&Stage.Utils.isUrl(this.props.blueprintUrl)?(this.setState({loading:!0},function(){return e.props.onChange({blueprintFile:null})}),this.blueprintFileRef.current&&this.blueprintFileRef.current.reset(),this.actions.doListYamlFiles(this.props.blueprintUrl,null,!0).then(function(n){e.setState({yamlFiles:n,loading:!1},function(){var r=n.shift(),i=_.includes(n,t.DEFAULT_BLUEPRINT_YAML_FILE)?t.DEFAULT_BLUEPRINT_YAML_FILE:n[0];e.props.onChange(o()({},t.NO_ERRORS,{blueprintName:r,blueprintFileName:i}))})}).catch(function(t){e.setState({loading:!1},function(){return e.props.onChange({errors:{error:t.message},blueprintName:"",blueprintFileName:""})})})):this.setState({yamlFiles:[]},this.resetErrors)}},{key:"_onBlueprintUrlFocus",value:function(){this.props.blueprintFile&&(this.blueprintFileRef.current&&this.blueprintFileRef.current.reset(),this._onBlueprintFileReset())}},{key:"_onBlueprintFileChange",value:function(e){var n=this;e?(this.setState({loading:!0}),this.actions.doListYamlFiles(null,e,!0).then(function(r){var i=r.shift(),a=_.includes(r,t.DEFAULT_BLUEPRINT_YAML_FILE)?t.DEFAULT_BLUEPRINT_YAML_FILE:r[0];n.setState({yamlFiles:r,loading:!1},function(){n.props.onChange(o()({},t.NO_ERRORS,{blueprintFile:e,blueprintUrl:e.name,blueprintName:i,blueprintFileName:a}))})}).catch(function(e){n.setState({loading:!1},function(){return n.props.onChange({errors:{error:e.message},blueprintName:"",blueprintFileName:""})})})):this.setState({yamlFiles:[]},this.resetErrors)}},{key:"_onBlueprintFileReset",value:function(){var e=this;this.setState({yamlFiles:[]},function(){return e.props.onChange(o()({},t.NO_ERRORS,{blueprintFile:null,blueprintUrl:"",blueprintName:"",blueprintFileName:""}))})}},{key:"_onBlueprintImageUrlFocus",value:function(){this.props.imageFile&&(this.imageFileRef.current&&this.imageFileRef.current.reset(),this._onBlueprintImageReset())}},{key:"_onBlueprintImageChange",value:function(e){e&&this.props.onChange(o()({},t.NO_ERRORS,{imageUrl:e.name,imageFile:e}))}},{key:"_onBlueprintImageReset",value:function(){this.props.onChange(o()({},t.NO_ERRORS,{imageUrl:"",imageFile:null}))}},{key:"resetErrors",value:function(){this.props.onChange(t.NO_ERRORS)}},{key:"render",value:function(){var e=Stage.Basic,t=e.Form,n=e.Label,r=_.map(this.state.yamlFiles,function(e){return{text:e,value:e}});return y.a.createElement(t,{loading:this.state.loading||this.props.loading,errors:this.props.showErrorsSummary?this.props.errors:null,onErrorsDismiss:this.resetErrors.bind(this)},y.a.createElement(t.Field,{label:"Blueprint package",required:!0,error:this.props.errors.blueprintUrl,help:"You can provide single YAML file or blueprint archive. Supported types are: yml, yaml, zip, tar, tar.gz and tar.bz2. The archive package must contain exactly one directory that includes at least one YAML file."},y.a.createElement(t.UrlOrFile,{name:"blueprint",value:this.props.blueprintUrl,placeholder:"Provide the blueprint's URL or click browse to select a file",onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onBlueprintUrlFocus.bind(this),onBlurUrl:this._onBlueprintUrlBlur.bind(this),onChangeFile:this._onBlueprintFileChange.bind(this),onResetFile:this._onBlueprintFileReset.bind(this),label:y.a.createElement(n,null,this.props.blueprintFile?"File":"URL"),fileInputRef:this.blueprintFileRef})),y.a.createElement(t.Field,{label:"Blueprint name",required:!0,error:this.props.errors.blueprintName,help:"The package is uploaded to the Manager as a blueprint with the name you specify here."},y.a.createElement(t.Input,{name:"blueprintName",value:this.props.blueprintName,onChange:this._handleInputChange.bind(this)})),y.a.createElement(t.Field,{label:"Blueprint YAML file",required:!0,error:this.props.errors.blueprintFileName,help:"If you choose archive as blueprint package, you must specify the blueprint YAML file for your environment, because the archive can contain more than one YAML file."},y.a.createElement(t.Dropdown,{name:"blueprintFileName",search:!0,selection:!0,options:r,value:this.props.blueprintFileName,onChange:this._handleInputChange.bind(this)})),y.a.createElement(t.Field,{label:"Blueprint icon",error:this.props.errors.imageUrl,help:"(Optional) The blueprint icon file is shown with the blueprint in the local blueprint widget."},y.a.createElement(t.UrlOrFile,{name:"image",value:this.props.imageUrl,placeholder:"Provide the image file URL or click browse to select a file",onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onBlueprintImageUrlFocus.bind(this),onBlurUrl:_.noop,onChangeFile:this._onBlueprintImageChange.bind(this),onResetFile:this._onBlueprintImageReset.bind(this),label:y.a.createElement(n,null,this.props.imageFile?"File":"URL"),fileInputRef:this.imageFileRef})))}}]),t}(y.a.Component);b.propTypes={blueprintUrl:g.a.string,blueprintFile:g.a.object,blueprintName:g.a.string,blueprintFileName:g.a.string,imageUrl:g.a.string,imageFile:g.a.object,errors:g.a.object,loading:g.a.bool,showErrorsSummary:g.a.bool,onChange:g.a.func.isRequired,toolbox:g.a.object.isRequired},b.defaultProps={blueprintUrl:"",blueprintFile:null,blueprintName:"",blueprintFileName:"",imageUrl:"",imageFile:null,errors:{},loading:!1,showErrorsSummary:!0},b.initialState={loading:!1,yamlFiles:[]},b.DEFAULT_BLUEPRINT_YAML_FILE="blueprint.yaml",b.NO_ERRORS={errors:{}},Stage.defineCommon({name:"UploadBlueprintForm",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=n(1),g=n.n(m),v=function(e){function t(e){a()(this,t);var n=c()(this,(t.__proto__||o()(t)).call(this,e));return n.state=t.initialState,n.actions=new Stage.Common.BlueprintActions(e.toolbox),n}return f()(t,e),s()(t,[{key:"componentDidUpdate",value:function(e){e.open&&!this.props.open&&this.setState(t.initialState)}},{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(this.props.open,e.open)||!_.isEqual(this.state,t)}},{key:"uploadBlueprint",value:function(){var e=this,t=this.state.blueprintFile?"":this.state.blueprintUrl,n=this.state.imageFile?"":this.state.imageUrl,r={};if(this.state.blueprintFile||(_.isEmpty(t)?r.blueprintUrl="Please select blueprint package":Stage.Utils.isUrl(t)||(r.blueprintUrl="Please provide valid URL for blueprint package")),_.isEmpty(this.state.blueprintName)&&(r.blueprintName="Please provide blueprint name"),_.isEmpty(this.state.blueprintFileName)&&(r.blueprintFileName="Please provide blueprint YAML file"),_.isEmpty(n)||Stage.Utils.isUrl(t)||(r.imageUrl="Please provide valid URL for blueprint icon"),!_.isEmpty(r))return this.setState({errors:r}),!1;this.setState({loading:!0}),this.actions.doUpload(this.state.blueprintName,this.state.blueprintFileName,t,this.state.blueprintFile,n,this.state.imageFile,this.state.visibility).then(function(){e.setState({errors:{},loading:!1},e.props.onHide),e.props.toolbox.refresh()}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"onFormFieldChange",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,r=t.CancelButton,o=t.Icon,i=t.Modal,a=t.VisibilityField,l=Stage.Common.UploadBlueprintForm;return g.a.createElement("div",null,g.a.createElement(i,{open:this.props.open,onClose:this.props.onHide,className:"uploadBlueprintModal"},g.a.createElement(i.Header,null,g.a.createElement(o,{name:"upload"})," Upload blueprint",g.a.createElement(a,{visibility:this.state.visibility,className:"rightFloated",onVisibilityChange:function(t){return e.setState({visibility:t})}})),g.a.createElement(i.Content,null,g.a.createElement(l,{blueprintUrl:this.state.blueprintUrl,blueprintFile:this.state.blueprintFile,blueprintName:this.state.blueprintName,blueprintFileName:this.state.blueprintFileName,imageUrl:this.state.imageUrl,imageFile:this.state.imageFile,errors:this.state.errors,loading:this.state.loading,onChange:this.onFormFieldChange.bind(this),toolbox:this.props.toolbox})),g.a.createElement(i.Actions,null,g.a.createElement(r,{onClick:this.props.onHide,disabled:this.state.loading}),g.a.createElement(n,{onClick:this.uploadBlueprint.bind(this),disabled:this.state.loading,content:"Upload",icon:"upload",color:"green"}))))}}]),t}(g.a.Component);v.propTypes={open:h.a.bool.isRequired,onHide:h.a.func.isRequired,toolbox:h.a.object.isRequired},v.initialState={loading:!1,visibility:Stage.Common.Consts.defaultVisibility,blueprintUrl:"",blueprintFile:null,blueprintName:"",blueprintFileName:"",imageUrl:"",imageFile:null,errors:{}},Stage.defineCommon({name:"UploadBlueprintModal",common:v})},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(1),g=n.n(m),v=n(0),y=n.n(v),b=function(e){function t(e){s()(this,t);var n=f()(this,(t.__proto__||a()(t)).call(this,e));return n.wagonFileRef=g.a.createRef(),n.yamlFileRef=g.a.createRef(),n}return h()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.wagonFileRef.current&&this.wagonFileRef.current.reset(),this.yamlFileRef.current&&this.yamlFileRef.current.reset(),this.resetErrors()}},{key:"resetErrors",value:function(){this.props.onChange(t.NO_ERRORS)}},{key:"_handleInputChange",value:function(e,n){this.props.onChange(o()({},t.NO_ERRORS,Stage.Basic.Form.fieldNameValue(n)))}},{key:"_onWagonUrlFocus",value:function(){this.props.wagonFile&&(this.wagonFileRef.current&&this.wagonFileRef.current.reset(),this._onWagonFileReset())}},{key:"_onWagonFileChange",value:function(e){this.props.onChange(o()({},t.NO_ERRORS,{wagonFile:e||null,wagonUrl:e?e.name:""}))}},{key:"_onWagonFileReset",value:function(){this.props.onChange(o()({},t.NO_ERRORS,{wagonFile:null,wagonUrl:""}))}},{key:"_onYamlUrlFocus",value:function(){this.props.yamlFile&&(this.yamlFileRef.current&&this.yamlFileRef.current.reset(),this._onYamlFileReset())}},{key:"_onYamlFileChange",value:function(e){this.props.onChange(o()({},t.NO_ERRORS,{yamlFile:e||null,yamlUrl:e?e.name:""}))}},{key:"_onYamlFileReset",value:function(){this.props.onChange(o()({},t.NO_ERRORS,{yamlFile:null,yamlUrl:""}))}},{key:"render",value:function(){var e=Stage.Basic,t=e.Container,n=e.Form,r=e.Label,o=[g.a.createElement(n.Field,{label:"Wagon file",required:this.props.addRequiredMarks,key:"wagon",error:this.props.errors.wagonUrl},g.a.createElement(n.UrlOrFile,{name:"wagon",value:this.props.wagonUrl,placeholder:this.props.wagonPlaceholder,onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onWagonUrlFocus.bind(this),onBlurUrl:_.noop,onChangeFile:this._onWagonFileChange.bind(this),onResetFile:this._onWagonFileReset.bind(this),label:g.a.createElement(r,null,this.props.wagonFile?"File":"URL"),fileInputRef:this.wagonFileRef})),g.a.createElement(n.Field,{label:"YAML file",required:this.props.addRequiredMarks,key:"yaml",error:this.props.errors.yamlUrl},g.a.createElement(n.UrlOrFile,{name:"yaml",value:this.props.yamlUrl,placeholder:this.props.yamlPlaceholder,onChangeUrl:this._handleInputChange.bind(this),onFocusUrl:this._onYamlUrlFocus.bind(this),onBlurUrl:_.noop,onChangeFile:this._onYamlFileChange.bind(this),onResetFile:this._onYamlFileReset.bind(this),label:g.a.createElement(r,null,this.props.yamlFile?"File":"URL"),fileInputRef:this.yamlFileRef}))];return this.props.wrapInForm?g.a.createElement(n,{errors:this.props.errors,onErrorsDismiss:this.resetErrors.bind(this),loading:this.props.loading},o):g.a.createElement(t,{fluid:!0},o)}}]),t}(g.a.Component);b.propTypes={wagonUrl:y.a.string,wagonFile:y.a.object,wagonPlaceholder:y.a.string,yamlUrl:y.a.string,yamlFile:y.a.object,yamlPlaceholder:y.a.string,errors:y.a.object,loading:y.a.bool,onChange:y.a.func.isRequired,wrapInForm:y.a.bool,addRequiredMarks:y.a.bool},b.defaultProps={wagonUrl:"",wagonFile:null,wagonPlaceholder:"Provide the plugin's wagon file URL or click browse to select a file",yamlUrl:"",yamlFile:null,yamlPlaceholder:"Provide the plugin's YAML file URL or click browse to select a file",errors:{},loading:!1,wrapInForm:!0,addRequiredMarks:!0},b.NO_ERRORS={errors:{}},Stage.defineCommon({name:"UploadPluginForm",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(5),a=n.n(i),l=n(2),s=n.n(l),u=n(3),c=n.n(u),p=n(6),f=n.n(p),d=n(7),h=n.n(d),m=n(0),g=n.n(m),v=n(1),y=n.n(v),b=function(e){function t(e){s()(this,t);var n=f()(this,(t.__proto__||a()(t)).call(this,e));return n.state=o()({},t.initialState),n}return h()(t,e),c()(t,[{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.setState(t.initialState)}},{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(this.props.open,e.open)||!_.isEqual(this.state,t)}},{key:"uploadPlugin",value:function(){var e=this,t=this.state.wagonFile?"":this.state.wagonUrl,n=this.state.yamlFile?"":this.state.yamlUrl,r={};if(this.state.wagonFile||(_.isEmpty(t)?r.wagonUrl="Please select wagon file or provide URL to wagon file":Stage.Utils.isUrl(t)||(r.wagonUrl="Please provide valid URL for wagon file")),this.state.yamlFile||(_.isEmpty(n)?r.yamlUrl="Please select YAML file or provide URL to YAML file":Stage.Utils.isUrl(n)||(r.yamlUrl="Please provide valid URL for YAML file")),!_.isEmpty(r))return this.setState({errors:r}),!1;this.setState({loading:!0}),new Stage.Common.PluginActions(this.props.toolbox).doUpload(this.state.visibility,t,n,this.state.wagonFile,this.state.yamlFile).then(function(){e.setState({errors:{},loading:!1},e.props.onHide),e.props.toolbox.refresh()}).catch(function(t){e.setState({errors:{error:t.message},loading:!1})})}},{key:"onFormFieldChange",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=Stage.Basic,n=t.ApproveButton,r=t.CancelButton,o=t.Icon,i=t.Modal,a=t.VisibilityField,l=Stage.Common.UploadPluginForm;return y.a.createElement(i,{open:this.props.open,onClose:this.props.onHide},y.a.createElement(i.Header,null,y.a.createElement(o,{name:"upload"})," Upload plugin",y.a.createElement(a,{visibility:this.state.visibility,className:"rightFloated",onVisibilityChange:function(t){return e.setState({visibility:t})}})),y.a.createElement(i.Content,null,y.a.createElement(l,{wagonUrl:this.state.wagonUrl,wagonFile:this.state.wagonFile,yamlUrl:this.state.yamlUrl,yamlFile:this.state.yamlFile,errors:this.state.errors,loading:this.state.loading,onChange:this.onFormFieldChange.bind(this)})),y.a.createElement(i.Actions,null,y.a.createElement(r,{onClick:this.props.onHide,disabled:this.state.loading}),y.a.createElement(n,{onClick:this.uploadPlugin.bind(this),disabled:this.state.loading,content:"Upload",icon:"upload",color:"green"})))}}]),t}(y.a.Component);b.propTypes={open:g.a.bool.isRequired,onHide:g.a.func.isRequired,toolbox:g.a.object.isRequired},b.initialState={loading:!1,wagonUrl:"",wagonFile:null,yamlUrl:"",yamlFile:null,errors:{},visibility:Stage.Common.Consts.defaultVisibility},Stage.defineCommon({name:"UploadPluginModal",common:b})},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(2),a=n.n(i),l=n(3),s=n.n(l),u=n(6),c=n.n(u),p=n(7),f=n.n(p),d=n(0),h=n.n(d),m=function(e){function t(e,n){return a()(this,t),c()(this,(t.__proto__||o()(t)).call(this,e,n))}return f()(t,e),s()(t,[{key:"render",value:function(){var e=Stage.Basic.Form;return React.createElement(e.File,{name:"yamlFile",showInput:!1,showReset:!1,openButtonParams:{className:"rightFloated",content:"Load Values",labelPosition:"left"},onChange:this.props.onChange,help:"You can provide YAML file with "+this.props.dataType+" to automatically fill in the form.",loading:this.props.fileLoading,disabled:this.props.fileLoading})}}]),t}(React.Component);m.propTypes={dataType:h.a.string,fileLoading:h.a.bool,onChange:h.a.func},m.defaultProps={dataType:"values",fileLoading:!1,onChange:_.noop},Stage.defineCommon({name:"YamlFileButton",common:m})}]);
\ No newline at end of file
